(this["webpackJsonpride4ever-ui"]=this["webpackJsonpride4ever-ui"]||[]).push([[0],{107:function(e,t,n){},125:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){},156:function(e,t,n){},158:function(e,t,n){},186:function(e,t,n){},188:function(e,t,n){},189:function(e,t,n){},190:function(e,t,n){},191:function(e,t,n){},195:function(e,t,n){},197:function(e,t,n){},198:function(e,t,n){},199:function(e,t,n){},205:function(e,t,n){},206:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){},222:function(e,t,n){},225:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(32),i=n.n(s),c=n(227),o=(n(107),n(8)),u=n(44),l=n(2),d=n(3),b=n(4),j=n(15),f=n(14),h=n(21),p=n(5),O=n.n(p),v=n(10),m=n(23),g="SET_ERROR",x="RESET_ERROR",y=function(e){return{type:g,data:e}},w="SET_USER",S="RESET_USER",k=function(e){return{type:w,data:e}},A=function(){return{type:S}},N=n(0),T=Object(h.g)(Object(o.b)(null,(function(e){return{resetErrorInState:function(){return e({type:x})},resetUserInState:function(){return e(A())}}}))((function(e){var t=e.resetErrorInState,n=e.resetUserInState,r=e.history,s=Object(a.useRef)(null),i=Object(o.c)((function(e){return e.error.requestStatus})),c=Object(a.useCallback)(Object(v.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:401===i?(s.current.show({severity:"error",summary:"Message d'erreur",detail:"Votre session \xe0 expir\xe9, veuillez vous authentifier"}),n(),r.push("/login")):403===i?(s.current.show({severity:"error",summary:"Message d'erreur",detail:"Acc\xe8s non authoris\xe9"}),r.push("/bulletins")):404===i?(s.current.show({severity:"error",summary:"Message d'erreur",detail:"La ressource demand\xe9e est introuvable"}),r.push("/bulletins")):null!==i&&s.current.show({severity:"error",summary:"Message d'erreur",detail:"Erreur serveur, veuillez v\xe9rifier le bon fonctionnement de votre connexion internet"}),t();case 2:case"end":return e.stop()}}),e)}))),[i,t,n,r]);return Object(a.useEffect)((function(){c()}),[c]),Object(N.jsx)(m.Toast,{ref:s,baseZIndex:1e4})}))),C=function(){function e(){Object(d.a)(this,e)}return Object(b.a)(e,[{key:"onOpen",value:function(e){throw new Error("Unimplemented. Event to trigged: ",this,e)}},{key:"onError",value:function(e){throw new Error("Unimplemented. Event to trigged: ",this,e)}},{key:"onMessage",value:function(e){throw new Error("Unimplemented. Event to trigged: ",this,e)}},{key:"onClose",value:function(e){throw new Error("Unimplemented. Event to trigged: ",this,e)}}],[{key:"getJson",value:function(e){try{return JSON.parse(e)}catch(t){return null}}}]),e}(),E=function(){function e(t){Object(d.a)(this,e),this.url=t,this.connection=null,this.eventListener=null}return Object(b.a)(e,[{key:"bindEvents",value:function(){var e=this;if(null===this.connection||null===this.eventListener)throw Error('"connection" or "eventListerner" properties are not set.');this.connection.onopen=function(t){e.eventListener.onOpen(t)},this.connection.onclose=function(t){e.eventListener.onClose(t)},this.connection.onerror=function(t){e.eventListener.onError(t)},this.connection.onmessage=function(t){e.eventListener.onMessage(t)}}},{key:"connect",value:function(){this.connection=new WebSocket(this.url);try{this.bindEvents()}catch(e){}}},{key:"disconnect",value:function(){this.connection.close()}},{key:"setEventListener",value:function(e){if(!(e instanceof C))throw Error("Unexpected type for event listener.");this.eventListener=e,null!==this.connection&&void 0!==this.connection&&this.bindEvents()}}]),e}(),P=function(){function e(){Object(d.a)(this,e),this.url=null,this.eventListener=null}return Object(b.a)(e,[{key:"withUrl",value:function(e){return this.url=e,this}},{key:"withEventListener",value:function(e){return this.eventListener=e,this}},{key:"build",value:function(){if(null!==this.url&&void 0!==this.url){var e=new E(this.url);return null!=this.eventListener&&e.setEventListener(this.eventListener),e}throw new Error("Websocket URL is not defined.")}}]),e}(),R=function(){function e(){Object(d.a)(this,e)}return Object(b.a)(e,null,[{key:"getInstance",value:function(){if(null===e.singleton){var t=new P;e.singleton=t.withUrl("ws://192.168.240.1:9601/").build()}return e.singleton}}]),e}();R.singleton=null;var I=n(90),L=n(29),D=n(49),B=(n(125),n(12)),M=n(11),F=n(16),U=n(25),_=n.n(U),z=function(){function e(t){Object(d.a)(this,e),this.url=t,this.headers={Authorization:e.getDefaultJwt()}}return Object(b.a)(e,[{key:"get",value:function(e){var t=this;return new Promise((function(n,a){try{_.a.get(t.url,{headers:t.headers,params:e}).then((function(e){var r=null;(r=e.headers["content-type"]&&"application/json"===e.headers["content-type"]?e.data:t.toJson(e.data))?n(r):a(new Error(String("Error while parsing data to JSON: ").concat(e.data)))})).catch((function(e){a(e)}))}catch(r){a(r)}}))}},{key:"find",value:function(e,t){var n=this;return new Promise((function(a,r){try{_.a.get(String(n.url).concat("/".concat(t)),{headers:n.headers,params:e}).then((function(e){var t=null;(t=e.headers["content-type"]&&"application/json"===e.headers["content-type"]?e.data:n.toJson(e.data))?a(t):r(new Error(String("Error while parsing data to JSON: ").concat(e.data)))})).catch((function(e){r(e)}))}catch(s){r(s)}}))}},{key:"create",value:function(e,t){var n=this;return new Promise((function(a,r){try{var s=Object(F.a)({},n.headers);s["Content-Type"]="application/json",_.a.post(n.url,t,{headers:s,params:e}).then((function(e){a(e.data)})).catch((function(e){r(e)}))}catch(i){r(i)}}))}},{key:"sendFormData",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,r){try{var s=Object(F.a)({},t.headers);s["Content-Type"]="multipart/form-data",_.a.post(t.url,e,{headers:s,params:n}).then((function(e){a(e.data)})).catch((function(e){r(e)}))}catch(i){r(i)}}))}},{key:"update",value:function(e,t,n){var a=this;return new Promise((function(r,s){try{var i=Object(F.a)({},a.headers);i["Content-Type"]="application/json",_.a.put(String(a.url).concat("/").concat(t),n,{headers:i,params:e}).then((function(e){r(e.data)})).catch((function(e){s(e)}))}catch(c){s(c)}}))}},{key:"delete",value:function(e,t){var n=this;return new Promise((function(a,r){try{var s=Object(F.a)({},n.headers);s["Content-Type"]="application/json",_.a.delete(String(n.url).concat("/").concat(t),{headers:s,params:e}).then((function(e){a({status:e.status,message:e.statusText})})).catch((function(e){r(e)}))}catch(i){r(i)}}))}}],[{key:"getDefaultJwt",value:function(){var e=document.cookie.split("=")[1];return e?e="Bearer ".concat(e):null}},{key:"toJson",value:function(e){try{return JSON.parse(e)}catch(t){return console.error(t),console.error(e),null}}}]),e}(),H=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.call(this,String("/api/v0").concat("/datetime"))}return Object(b.a)(n,[{key:"get",value:function(e){var t=this;return new Promise((function(a,r){Object(B.a)(Object(M.a)(n.prototype),"get",t).call(t,e).then((function(e){a(1e3*e.utc.epochSecond)})).catch((function(e){r(e)}))}))}}]),n}(z),V=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;Object(d.a)(this,e),this.year=t.getUTCFullYear(),this.month=t.getUTCMonth()+1,this.date=t.getUTCDate(),this.day=t.getUTCDay(),this.hours=t.getUTCHours(),this.minutes=t.getUTCMinutes(),this.seconds=t.getUTCSeconds(),this.milliseconds=t.getUTCMilliseconds()}return Object(b.a)(e,[{key:"format",value:function(e){var t=String(e);return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("yyyy",this.year)).replace("y",String(this.year).substr(0,2))).replace("MM",String(1===this.month.toString().length?String("0").concat(this.month.toString()):this.month))).replace("M",String(this.month))).replace("dd",String(1===this.date.toString().length?String("0").concat(this.date.toString()):this.date))).replace("d",String(this.date))).replace("FF",String(1===this.day.toString().length?String("0").concat(this.day.toString()):this.day))).replace("F",String(this.day))).replace("hh",String(1===this.hours.toString().length?String("0").concat(this.hours.toString()):this.hours))).replace("h",String(this.hours))).replace("mm",String(1===this.minutes.toString().length?String("0").concat(this.minutes.toString()):this.minutes))).replace("m",String(this.minutes))).replace("ss",String(1===this.seconds.toString().length?String("0").concat(this.seconds.toString()):this.seconds))).replace("s",String(this.seconds))).replace("SSS",String(1===this.milliseconds.toString().length?String("00").concat(this.milliseconds.toString()):2===this.milliseconds.toString().length?String("0").concat(this.milliseconds.toString()):this.milliseconds))).replace("S",String(this.milliseconds))}}]),e}(),G=Object(o.b)(null,(function(e){return{setErrorInState:function(t){return e(y(t))}}}))((function(e){var t=e.setErrorInState,n=Object(o.c)((function(e){return e.user.username})),r=Object(o.c)((function(e){return e.user.roles})),s=Object(a.useState)(6e5),i=Object(l.a)(s,1)[0],c=Object(a.useState)(null),u=Object(l.a)(c,2),d=u[0],b=u[1],j=Object(a.useState)(null),f=Object(l.a)(j,2),h=f[0],p=f[1],m=Object(a.useState)("MODE AUTOMATIQUE"),g=Object(l.a)(m,1)[0],x=Object(a.useState)(!1),y=Object(l.a)(x,1)[0],w=Object(a.useCallback)(Object(v.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(h+1e3);case 1:case"end":return e.stop()}}),e)}))),[h]),S=Object(a.useCallback)(Object(v.a)(O.a.mark((function e(){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new H,e.next=4,n.get();case 4:a=e.sent,p(a),b(a+i),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(e.t0.response?e.t0.response.status:e.t0.status||500);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[t,i]);Object(a.useEffect)((function(){h===d&&S()}),[h,d,S]),Object(a.useEffect)((function(){S()}),[S]),Object(a.useEffect)((function(){var e=setInterval(w,1e3);return function(){return clearInterval(e)}}),[w]);return Object(N.jsx)(I.Menubar,{style:{background:"#212121",color:"#fafafa"},className:"header-container",start:function(){return Object(N.jsxs)("div",{children:[Object(N.jsx)("a",{href:"./",children:Object(N.jsx)("img",{src:"/assets/images/logo-engie.svg",className:"engie-logo",alt:"React Bootstrap logo"})}),n&&r?Object(N.jsx)("span",{className:"mode",children:Object(N.jsx)(L.Tag,{style:{fontSize:"1rem"},value:g,severity:"info"})}):null]})},end:function(){if(n&&r){var e="Message Compl\xe9mentaire ";return e=y?e.concat("Activ\xe9"):e.concat("D\xe9sactiv\xe9"),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("span",{className:"mode",children:y?Object(N.jsx)(L.Tag,{style:{fontSize:"1rem"},value:e,severity:"info"}):Object(N.jsx)(L.Tag,{style:{fontSize:"1rem",color:"#9e9e9e",background:"#eeeeee55"},value:e,severity:"info"})}),Object(N.jsx)("span",{className:"date",children:h?new V(new Date(h)).format("dd-MM-yyyy hh:mm:ss UTC"):Object(N.jsx)(D.Skeleton,{})})]})}return null}})})),q=function e(t,n,a){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Object(d.a)(this,e),this.title=t,this.path=n,this.component=a,this.exact=r,this.allowedGroups=c,this.isVisible=s,this.icon=i,this.badge=o},W=n(19),J=(n(145),n(146),function(e){var t=e.content,n=e.position;return Object(N.jsx)("div",{className:"Tooltip",style:{float:n},children:t})}),Z=Object(o.b)(null,(function(e){return{logout:function(){return e(A())}}}))((function(e){var t=e.text,n=e.urlSrc,a=e.path,r=e.logout,s=e.badge;return Object(N.jsx)(N.Fragment,{children:"D\xe9connexion"===t?Object(N.jsx)("li",{className:"SideBarItem",children:Object(N.jsx)(u.b,{activeClassName:"item-selected",onClick:function(){return r()},to:a,children:Object(N.jsxs)("div",{className:"sidebar-item",children:[Object(N.jsx)("img",{className:"SideBarItemIcon",alt:"icon",src:n}),t,s?Object(N.jsx)(W.Badge,{severity:"danger",value:s}):null]})})}):Object(N.jsxs)("li",{className:"SideBarItem",children:[Object(N.jsx)(J,{content:t,position:"top"}),Object(N.jsx)(u.b,{activeClassName:"item-selected",to:a,children:Object(N.jsxs)("div",{className:"sidebar-item",children:[Object(N.jsx)("img",{className:"SideBarItemIcon",alt:"icon",src:n}),t,s?Object(N.jsx)(W.Badge,{severity:"danger",value:s}):null]})})]})})})),K=function(){function e(){Object(d.a)(this,e),this.version=0,this.release=0,this.bugfix=0,this.tag=null,this.full=null}return Object(b.a)(e,null,[{key:"parse",value:function(t){if(t&&void 0!==t.version&&void 0!==t.release&&void 0!==t.bugfix&&void 0!==t.tag&&void 0!==t.full){var n=new e;return n.version=t.version,n.release=t.release,n.bugfix=t.bugfix,n.tag=t.tag,n.full=t.full,n}return null}}]),e}(),X=function(){function e(){Object(d.a)(this,e),this.groupId="",this.artifactId="",this.version=""}return Object(b.a)(e,null,[{key:"parse",value:function(t){if(t&&void 0!==t.groupId&&void 0!==t.artifactId&&void 0!==t.version){var n=new e;return n.groupId=t.groupId,n.artifactId=t.artifactId,n.version=K.parse(t.version),n}return null}}]),e}(),Y=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.call(this,String("/api/v0").concat("/version"))}return Object(b.a)(n,[{key:"get",value:function(){var e=this;return new Promise((function(t,a){Object(B.a)(Object(M.a)(n.prototype),"get",e).call(e).then((function(e){t(X.parse(e))})).catch((function(e){a(e)}))}))}}]),n}(z),Q=(n(147),Object(o.b)(null,(function(e){return{setErrorInState:function(t){return e(y(t))}}}))((function(e){var t=e.routes,n=e.setErrorInState,r=Object(o.c)((function(e){return e.user.roles})),s=Object(o.c)((function(e){return e.user.firstname})),i=Object(o.c)((function(e){return e.user.lastname})),c=Object(a.useState)(null),u=Object(l.a)(c,2),d=u[0],b=u[1],j=Object(a.useCallback)(Object(v.a)(O.a.mark((function e(){var t,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new Y,e.next=4,t.get();case 4:a=e.sent,b(a.version.full),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n(e.t0.response?e.t0.response.status:e.t0.status||500);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[n]);Object(a.useEffect)((function(){j()}),[j]);return Object(N.jsxs)("nav",{className:"sidebar-container",children:[s&&i?Object(N.jsxs)("div",{className:"WelcomeUser",children:[Object(N.jsx)("img",{src:"/assets/images/user.svg",alt:"User"}),Object(N.jsxs)("p",{children:[s," ",i]})]}):null,Object(N.jsx)("ul",{className:"items-container",children:null!==r?t.map((function(e){if(!e.allowedGroups)return Object(N.jsx)(Z,{text:e.title,urlSrc:e.icon,path:e.path,badge:e.badge});for(var t=0;t<e.allowedGroups.length;t+=1)if(r.includes(e.allowedGroups[t]))return Object(N.jsx)(Z,{text:e.title,urlSrc:e.icon,path:e.path,badge:e.badge})})):Object(N.jsx)(Z,{text:"Connexion",urlSrc:"/assets/images/icons/menu/login.svg",path:"/login"})}),Object(N.jsxs)("div",{className:"version-container",children:[Object(N.jsxs)("p",{children:["Version client:"," ","0.16.11"]}),Object(N.jsxs)("p",{children:["Version serveur:"," ",d||Object(N.jsx)(D.Skeleton,{})]})]})]})}))),$=n(13),ee=n(35),te=n(45),ne=n(18),ae=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.call(this,String("/api/v0").concat("/broadcasts-configurations"))}return Object(b.a)(n,[{key:"get",value:function(e){var t=this;return new Promise((function(a,r){return[Object(B.a)(Object(M.a)(n.prototype),"get",t).call(t,e).then((function(e){var t=[];if(Array.isArray(e))for(var n=0;n<e.length;n+=1)t.push(e[n]);else t.push(e);a(t)})).catch((function(e){r(e)}))]}))}},{key:"create",value:function(e,t){var a=this;return new Promise((function(r,s){return[Object(B.a)(Object(M.a)(n.prototype),"create",a).call(a,e,t).then((function(e){r(e)})).catch((function(e){s(e)}))]}))}},{key:"update",value:function(e,t,a){var r=this;return new Promise((function(s,i){return[Object(B.a)(Object(M.a)(n.prototype),"update",r).call(r,e,t,a).then((function(e){s(e)})).catch((function(e){i(e)}))]}))}}]),n}(z),re=(n(156),Object(o.b)(null,(function(e){return{setErrorInState:function(t){return e(y(t))}}}))((function(e){var t=e.setErrorInState,n=Object(a.useState)([]),r=Object(l.a)(n,2),s=r[0],i=r[1],c=Object(a.useState)([]),o=Object(l.a)(c,2),u=o[0],d=o[1],b=Object(a.useRef)(null),j=["FRENCH","ENGLISH"],f=Object(a.useCallback)(Object(v.a)(O.a.mark((function e(){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new ae,e.next=4,n.get({});case 4:a=e.sent,i(Object($.a)(a)),a.forEach((function(e){d((function(t){return[].concat(Object($.a)(t),[{type:e.type,languages:Object($.a)(e.languages)}])}))})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(e.t0.response?e.t0.response.status:e.t0.status||500);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[t]);Object(a.useEffect)((function(){f()}),[f]);var h=function(e){var t=!0;if(s.length>0&&s.length===u.length){var n=s.find((function(t){return t.type===e})),a=u.find((function(t){return t.type===e}));n.languages.length!==a.languages.length&&(t=!1),n.languages.length===a.languages.length&&n.languages.forEach((function(e){a.languages.includes(e)||(t=!1)}))}return t};console.log(h("RTC"));return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(m.Toast,{ref:b,baseZIndex:1e5}),Object(N.jsx)("main",{children:Object(N.jsx)("section",{children:Object(N.jsx)("div",{className:"broadcast-configurator-container",children:s.length>0?s.map((function(e){return Object(N.jsxs)(ee.Card,{title:"Configuration audio ".concat(e.type," ").concat(e.name),style:{width:"22rem",marginBottom:"2em"},children:[Object(N.jsx)(te.MultiSelect,{name:e.name,value:e.languages,options:j,onChange:function(e){return function(e){var t=e.target.value;if(0===t.length)b.current.show({severity:"warn",summary:"Message d'avertissement",detail:"Au moins une langue doit \xeatre s\xe9lectionn\xe9e"});else{var n=Object($.a)(s);n[s.findIndex((function(t){return t.name===e.target.name}))].languages=t,i(n)}}(e)},placeholder:"Selectionner une langue ou plus"}),Object(N.jsx)(ne.Button,{disabled:h(e.type),label:"Mettre \xe0 jour",style:{marginTop:"1rem",width:"100%"},className:"p-button-success p-mr-1",onClick:function(){return function(e){try{if(0===e.languages.length)b.current.show({severity:"warn",summary:"Message d'avertissement",detail:"Au moins une langue doit \xeatre s\xe9lectionn\xe9e"});else{(new ae).create({},e);var n=Object($.a)(u);n.forEach((function(t){t.type===e.type&&(t.languages=Object($.a)(e.languages))})),d(Object($.a)(n)),b.current.show({severity:"success",summary:"Message de succ\xe8s",detail:"La configuration \xe0 bien \xe9t\xe9 modfi\xe9e"})}}catch(a){t(a.response?a.response.status:a.status||500)}}(e)}})]},e)})):Object(N.jsx)("h3",{children:"Aucune configuration trouv\xe9e"})})})})]})}))),se=n(226),ie=function(e){var t=e.path,n=e.component,a=e.allowedGroups,r=e.exact,s=Object(se.a)(),i=Object(l.a)(s,1)[0],c=Object(o.c)((function(e){return e.user.roles}));return Object(N.jsx)(h.b,{exact:r,path:t,render:function(){if(i&&c)for(var e=0;e<c.length;e+=1)if(a.includes(c[e]))return Object(N.jsx)(n,{});return Object(N.jsx)(h.a,{to:"/login"})}})},ce=n(37),oe=n(52),ue=n(50),le="SHOW_TOAST",de="RESET_TOAST",be=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this,String("/api/v0").concat("/users"))).BASE_URL_AUTH_WS="/api/v0",e}return Object(b.a)(n,[{key:"connectUser",value:function(){var e=Object(v.a)(O.a.mark((function e(t){var n,a,r,s,i,c,o,u,l,d,b,j,f,h,p;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.username,a=t.password,e.next=4,_.a.post("".concat(this.BASE_URL_AUTH_WS,"/login"),{username:n,password:a});case 4:return r=e.sent,s=r.status,i=r.data.account,c=i.uid,o=i.givenName,u=i.sn,l=i.groups,d=r.data.jws,e.abrupt("return",{status:s,uid:c,givenName:o,sn:u,groups:l,jws:d,severity:"success",summary:"Succ\xe8s",detail:"Connexion r\xe9ussie"});case 11:if(e.prev=11,e.t0=e.catch(0),!e.t0.response){e.next=16;break}return b=e.t0.response,j=b.data,f=b.status,h=b.statusText,e.abrupt("return",{severity:"error",summary:"Erreur",detail:j,status:f,message:h});case 16:return p=e.t0.message,e.abrupt("return",{severity:"error",summary:"Erreur",message:p});case 18:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getUsers",value:function(){var e=Object(v.a)(O.a.mark((function e(t){var n,a,r,s,i,c,o,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={Authorization:"Bearer ".concat(t)},e.next=4,_.a.get("".concat(this.BASE_URL_AUTH_WS,"/users"),{headers:n});case 4:return a=e.sent,r=[],a.data.forEach((function(e){e.entryDN.startsWith("uid")&&r.push(e)})),e.abrupt("return",{status:a.status,users:r});case 10:if(e.prev=10,e.t0=e.catch(0),!e.t0.response){e.next=15;break}return s=e.t0.response,i=s.data,c=s.status,o=s.statusText,e.abrupt("return",{severity:"error",summary:"Erreur",detail:i,status:c,message:o});case 15:return u=e.t0.message,e.abrupt("return",{severity:"error",summary:"Erreur",message:u});case 17:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createUser",value:function(){var e=Object(v.a)(O.a.mark((function e(t,a,r){var s,i,c,o,u,l,d,b,j,f,h,p;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=a.lastname,i=a.firstname,c=a.password,o=a.roles,u={cn:"".concat(n.firstLetterUpperCase(i)," ").concat(s.toUpperCase()),createTimestamp:null,creatorsName:null,description:"Real person.",entryCSN:null,entryDN:"uid=".concat(r,",ou=persons,ou=users,ou=root,dc=ineo-es,dc=engie,dc=com"),entryUUID:null,gidNumber:3e3,hasSubordinates:!1,homeDirectory:"/home/ineo-es/".concat(r),l:"France",loginShell:"/bin/bash",mail:"".concat(r,"@ineo-es.engie.com"),modifiersName:null,modifyTimestamp:null,o:"Ineo ES",ou:"groups",st:"Occitanie",structuralObjectClass:null,subschemaSubentry:null,uid:r,uidNumber:3e3,givenName:i,sn:s.toUpperCase(),groups:o,userPassword:c},l={Authorization:"Bearer ".concat(t)},e.next=6,_.a.post("".concat(this.BASE_URL_AUTH_WS,"/users"),u,{headers:l});case 6:return d=e.sent,e.abrupt("return",{status:d.status,user:d.data});case 10:if(e.prev=10,e.t0=e.catch(0),!e.t0.response){e.next=15;break}return b=e.t0.response,j=b.data,f=b.status,h=b.statusText,e.abrupt("return",{severity:"error",summary:"Erreur",detail:j,status:f,message:h});case 15:return p=e.t0.message,e.abrupt("return",{severity:"error",summary:"Erreur",message:p});case 17:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"deleteUser",value:function(){var e=Object(v.a)(O.a.mark((function e(t,n){var a,r,s,i,c,o,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={Authorization:"Bearer ".concat(t)},e.next=4,_.a.delete("".concat(this.BASE_URL_AUTH_WS,"/users/").concat(n),{headers:a});case 4:return r=e.sent,e.abrupt("return",{status:r.status});case 8:if(e.prev=8,e.t0=e.catch(0),!e.t0.response){e.next=13;break}return s=e.t0.response,i=s.data,c=s.status,o=s.statusText,e.abrupt("return",{severity:"error",summary:"Erreur",detail:i,status:c,message:o});case 13:return u=e.t0.message,e.abrupt("return",{severity:"error",summary:"Erreur",message:u});case 15:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(v.a)(O.a.mark((function e(t,a,r){var s=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,i){return[Object(B.a)(Object(M.a)(n.prototype),"update",s).call(s,t,a,r).then((function(){e()})).catch((function(e){i(e)}))]})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()}],[{key:"firstLetterUpperCase",value:function(e){return 1===e.length?e.toUpperCase():0===e.length?e:e.substring(0,0)+e[0].toUpperCase()+e.substring(1)}}]),n}(z),je=(n(158),Object(h.g)(Object(o.b)(null,(function(e){return{setUserInStore:function(t){return e(k(t))},setToastInStore:function(t){return e({type:le,data:t})},resetToastInStore:function(){return e({type:de})},setErrorInState:function(t){return e(y(t))}}}))((function(e){var t=e.setUserInStore,n=e.history,r=e.setToastInStore,s=e.resetToastInStore,i=e.setErrorInState,c=Object(a.useState)({username:"",password:""}),o=Object(l.a)(c,2),u=o[0],d=o[1],b=Object(se.a)(),j=Object(l.a)(b,2),f=(j[0],j[1]),h=Object(a.useState)(!1),p=Object(l.a)(h,2),m=p[0],g=p[1],x=new be,y=function(){var e=Object(v.a)(O.a.mark((function e(a){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,a.preventDefault(),e.next=5,x.connectUser(u);case 5:200===(c=e.sent).status?(f("jwt",c.jws),t({username:c.uid,firstname:c.givenName,lastname:c.sn,roles:c.groups,jwt:c.jws}),r({severity:c.severity,summary:c.summary,detail:c.detail}),s(),n.push("/bulletins")):(r({severity:c.severity,summary:"Erreur de connexion",detail:"L'identifiant ou le mot de passe est incorrect."}),s()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),i(e.t0.response?e.t0.response.status:e.t0.status||500);case 12:g(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),w=function(e){d(Object(F.a)(Object(F.a)({},u),{},Object(ce.a)({},e.target.name,e.target.value)))};return Object(N.jsx)("main",{children:Object(N.jsx)("section",{children:Object(N.jsxs)("form",{onSubmit:function(e){return y(e)},className:"login-controller",children:[Object(N.jsxs)("div",{children:[Object(N.jsx)("label",{htmlFor:"username-field",className:"username-label",children:"Nom d'utilisateur"}),Object(N.jsx)(oe.InputText,{className:"username-field",value:u.username,id:"username-field",name:"username","aria-describedby":"username-field-help",onChange:function(e){return w(e)}})]}),Object(N.jsxs)("div",{className:"password-field-container",children:[Object(N.jsx)("label",{htmlFor:"password-field",className:"password-label",children:"Mot de passe"}),Object(N.jsx)(oe.InputText,{className:"password-field",value:u.password,id:"password-field",name:"password",type:"password","aria-describedby":"password-field-help",onChange:function(e){return w(e)}})]}),Object(N.jsx)(ne.Button,{type:"submit",label:m?null:"Se conneceter",children:m?Object(N.jsx)(ue.ProgressSpinner,{style:{width:"22px",height:"23px"},strokeWidth:"5",animationDuration:"1s"}):null})]})})})})))),fe=n(91),he=n(46),pe=n(57),Oe=n(7),ve=n(28),me=n(92),ge=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.call(this,String("/api/v0").concat("/groups"))}return Object(b.a)(n,[{key:"get",value:function(){var e=Object(v.a)(O.a.mark((function e(t){var a=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){return[Object(B.a)(Object(M.a)(n.prototype),"get",a).call(a,t).then((function(t){var n=[];t.forEach((function(e){e.cn&&n.push(e.cn)})),e(n)})).catch((function(e){r(e)}))]})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(z);var xe=function(e){return new Promise((function(t,n){var a=[],r=null;e||n(new Error("formValues parameter should be defined")),Object.entries(e).forEach((function(e){var t=e[0],n=e[1];n||a.push("".concat(t," ne peux pas \xeatre vide")),"password"===t&&(r=n),"confirmPassword"===t&&r!==n&&a.push("Les mots de passe doivent \xeatre similaires"),"roles"===t&&0===n.length&&a.push("Des roles doivent \xeatre d\xe9finis pour l'utilisateur")})),t(a)}))},ye=(n(186),Object(o.b)(null,(function(e){return{setErrorInState:function(t){return e(y(t))}}}))((function(e){var t=e.setErrorInState,n=Object(se.a)(),r=Object(l.a)(n,2),s=r[0],i=(r[1],Object(a.useState)(!1)),c=Object(l.a)(i,2),o=c[0],u=c[1],d=Object(a.useState)(null),b=Object(l.a)(d,2),j=b[0],f=b[1],h=Object(a.useState)(!1),p=Object(l.a)(h,2),g=p[0],x=p[1],y=Object(a.useState)(null),w=Object(l.a)(y,2),S=w[0],k=w[1],A=Object(a.useState)(null),T=Object(l.a)(A,2),C=T[0],E=(T[1],Object(a.useState)(!1)),P=Object(l.a)(E,2),R=(P[0],P[1],Object(a.useState)({password:"",confirmPassword:""})),I=Object(l.a)(R,2),L=I[0],D=I[1],B=Object(a.useState)(null),M=Object(l.a)(B,2),U=M[0],_=M[1],z=Object(a.useState)({firstname:"",lastname:"",password:"",confirmPassword:"",roles:[]}),H=Object(l.a)(z,2),V=H[0],G=H[1],q=Object(a.useRef)(null),W=Object(a.useRef)(null),J=Object(a.useCallback)(Object(v.a)(O.a.mark((function e(){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new ge,e.next=4,n.get({});case 4:a=e.sent,f(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(e.t0.response?e.t0.response.status:e.t0.status||500);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[t]),Z=Object(a.useCallback)(Object(v.a)(O.a.mark((function e(){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new be,e.next=4,n.getUsers(s.jwt);case 4:a=e.sent,k(a.users),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(e.t0.response?e.t0.response.status:e.t0.status||500);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[s.jwt,t]);Object(a.useEffect)((function(){J(),Z()}),[Z,J]);var K=function(){x(!1),_(null),D({password:"",confirmPassword:""})},X=function(){u(!1),G({firstname:"",lastname:"",password:"",confirmPassword:"",roles:[]})},Y=function(e){G(Object(F.a)(Object(F.a)({},V),{},Object(ce.a)({},e.target.name,e.target.value||e.value)))},Q=function(e){D(Object(F.a)(Object(F.a)({},L),{},Object(ce.a)({},e.target.name,e.target.value)))},ee=function(e){if(e.length>1){var t=e;return t=(t=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")).replace(" ","_").toLowerCase(),console.log(t),t}return""},ae=function(){var e=Object(v.a)(O.a.mark((function e(){var n,a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xe(V);case 3:if(0!==(n=e.sent).length){e.next=12;break}return a=new be,e.next=8,a.createUser(s.jwt,V,ee("".concat(V.firstname,".").concat(V.lastname)));case 8:200===(r=e.sent).status?(k([].concat(Object($.a)(S),[r.user])),u(!1),W.current.show({severity:"success",summary:"Message de succ\xe8s",detail:"Le compte \xe0 bien \xe9t\xe9 cr\xe9e",life:3e3}),G({firstname:"",lastname:"",password:"",confirmPassword:"",roles:[]})):W.current.show({severity:"error",summary:"Message d'erreur",detail:r.detail,life:5e3}),e.next=13;break;case 12:q.current.show({severity:"error",summary:"Erreur formulaire",life:1e4,content:Object(N.jsxs)("div",{className:"errors-container",children:[Object(N.jsxs)("h4",{children:["Erreur",n.length>1?"s":""," ","dans le formulaire"]}),Object(N.jsx)("ul",{children:n.map((function(e){return Object(N.jsx)("li",{children:e})}))})]})});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),t(e.t0.response?e.t0.response.status:e.t0.status||500);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(v.a)(O.a.mark((function e(){var n,a,r,s,i,c,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,""===L.password){e.next=19;break}if(L.password!==L.confirmPassword){e.next=16;break}return(n=Object(F.a)({},U)).userPassword=L.password,a=new be,e.next=8,a.update({},n.uid,n);case 8:r=Object($.a)(S),s=r.findIndex((function(e){return e.uid===n.uid})),r[s]=Object(F.a)({},n),k(Object($.a)(r)),x(!1),q.current.show({severity:"success",summary:"Message de succ\xe8s",detail:"Le compte \xe0 bien \xe9t\xe9 modifi\xe9",life:3e3}),e.next=17;break;case 16:q.current.show({severity:"error",summary:"Message d'erreur",detail:"Veuillez saisir deux mots de passe identiques",life:3e3});case 17:e.next=27;break;case 19:return i=new be,e.next=22,i.update({},U.uid,U);case 22:c=Object($.a)(S),o=c.findIndex((function(e){return e.uid===U.uid})),c[o]=Object(F.a)({},U),k(Object($.a)(c)),x(!1);case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(0),t(e.t0.response?e.t0.response.status:e.t0.status||500);case 32:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(v.a)(O.a.mark((function e(n){var a,r,i,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=new be,r=n,e.next=5,a.deleteUser(s.jwt,r);case 5:i=Object($.a)(S),c=i.findIndex((function(e){return e.uid===r})),i.splice(c,1),k(i),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t(e.t0.response?e.t0.response.status:e.t0.status||500);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(){q.current.show({severity:"info",summary:"Annul\xe9",detail:"Op\xe9ration annul\xe9e",life:3e3})},le=function(e,t){Object(me.confirmPopup)({target:e.currentTarget,message:"Voulez-vous supprimer cet utilisateur ?",icon:"pi pi-info-circle",acceptClassName:"p-button-danger",accept:function(){return function(e){e&&(ie(e),q.current.show({severity:"success",summary:"Message de succ\xe8s",detail:"Le compte \xe0 bien \xe9t\xe9 supprim\xe9",life:3e3}))}(t)},reject:ue})};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(m.Toast,{ref:q,baseZIndex:1e4}),Object(N.jsx)(m.Toast,{ref:W,baseZIndex:1e4}),Object(N.jsx)("main",{children:Object(N.jsxs)("section",{className:"monitoring-accounts-manager-container",children:[Object(N.jsx)(ne.Button,{label:"Ajouter un compte",style:{marginBottom:"1rem"},icon:"pi pi-plus",onClick:function(){return u(!0)},className:"p-button-success p-mr-2"}),Object(N.jsxs)(he.Dialog,{className:"add-account-dialog",header:"Ajouter un compte",visible:o,footer:function(){return Object(N.jsxs)("div",{children:[Object(N.jsx)(ne.Button,{label:"Annuler",icon:"pi pi-times",onClick:function(){return X()},className:"p-button-text"}),Object(N.jsx)(ne.Button,{label:"Ajouter",icon:"pi pi-check",autoFocus:!0,onClick:function(e){return ae(e)}})]})},onHide:function(){return X()},children:[Object(N.jsxs)("div",{className:"role-dropdown-container",children:[Object(N.jsx)("h6",{children:"R\xf4les"}),Object(N.jsx)(te.MultiSelect,{name:"roles",value:V.roles,options:j,onChange:function(e){return Y(e)},placeholder:"S\xe9l\xe9ctionnez le r\xf4le de l'utilisateur"})]}),Object(N.jsxs)("div",{className:"firstname-input-container",children:[Object(N.jsx)("h6",{children:"Pr\xe9nom"}),Object(N.jsx)(oe.InputText,{name:"firstname",onChange:function(e){return Y(e)}})]}),Object(N.jsxs)("div",{className:"lastname-input-container",children:[Object(N.jsx)("h6",{children:"Nom"}),Object(N.jsx)(oe.InputText,{name:"lastname",onChange:function(e){return Y(e)}})]}),Object(N.jsxs)("div",{children:[Object(N.jsx)("h6",{children:"Votre identifiant de connexion"}),Object(N.jsx)("p",{children:ee("".concat(V.firstname,".").concat(V.lastname))})]}),Object(N.jsxs)("div",{className:"password-input-container",children:[Object(N.jsx)("h6",{children:"Mot de passe"}),Object(N.jsx)(pe.Password,{value:V.password,name:"password",feedback:!0,onChange:function(e){return Y(e)},toggleMask:!0})]}),Object(N.jsxs)("div",{className:"confirm-password-input-container",children:[Object(N.jsx)("h6",{children:"Confirmation du mot de passe"}),Object(N.jsx)(pe.Password,{value:V.confirmPassword,name:"confirmPassword",feedback:!1,onChange:function(e){return Y(e)},toggleMask:!0})]})]}),Object(N.jsxs)(he.Dialog,{className:"update-account-dialog",header:"Modifier un compte",visible:g,footer:function(){return Object(N.jsxs)("div",{children:[Object(N.jsx)(ne.Button,{label:"Annuler",icon:"pi pi-times",onClick:function(){return K()},className:"p-button-text"}),Object(N.jsx)(ne.Button,{label:"Confirmer",icon:"pi pi-check",autoFocus:!0,onClick:function(e){return re(e)}})]})},onHide:function(){return K()},children:[Object(N.jsxs)("div",{className:"role-dropdown-container",children:[Object(N.jsx)("h6",{children:"R\xf4les"}),Object(N.jsx)(te.MultiSelect,{name:"groups",value:null!==U&&U.groups,options:j,onChange:function(e){return function(e){_(Object(F.a)(Object(F.a)({},U),{},{groups:Object($.a)(e.value)}))}(e)},placeholder:"S\xe9l\xe9ctionnez le r\xf4le de l'utilisateur"})]}),Object(N.jsxs)("div",{className:"password-input-container",children:[Object(N.jsx)("h6",{children:"Nouveau mot de passe"}),Object(N.jsx)(pe.Password,{value:L.password,name:"password",feedback:!0,onChange:function(e){return Q(e)},toggleMask:!0})]}),Object(N.jsxs)("div",{className:"confirm-password-input-container",children:[Object(N.jsx)("h6",{children:"Confirmation du nouveau mot de passe"}),Object(N.jsx)(pe.Password,{value:L.confirmPassword,name:"confirmPassword",feedback:!1,onChange:function(e){return Q(e)},toggleMask:!0})]})]}),Object(N.jsxs)(ve.DataTable,{paginator:!0,rows:5,header:Object(N.jsx)("div",{className:"table-header",children:Object(N.jsx)("h3",{children:"Liste des comptes"})}),value:S,rowsPerPageOptions:[5,10,20],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",globalFilter:C,children:[Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center"},style:{textAlign:"center"},field:"cn",header:"Pr\xe9nom et NOM"}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center"},style:{textAlign:"center"},field:"uid",header:"Identifiant"}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center"},style:{textAlign:"center"},body:function(e){return e.groups&&e.groups.length>0?e.groups.map((function(e){return Object(N.jsx)(fe.Chip,{label:e,className:"role-".concat(e)},e)})):""},header:"R\xf4les"}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center"},style:{textAlign:"center"},body:function(e){return Object(N.jsx)(ne.Button,{className:"p-button-rounded p-button-outlined",icon:"pi pi-user-edit",onClick:function(){return function(e){var t=S.findIndex((function(t){return t.uid===e.uid}));_(Object(F.a)({},S[t])),x(!0)}(e)}})},header:"Modifier"}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center"},style:{textAlign:"center"},body:function(e){return Object(N.jsx)(ne.Button,{onClick:function(t){return le(t,e.uid)},icon:"pi pi-trash",className:"p-button-danger p-button-rounded p-button-outlined"})},field:"delete",header:"Supprimer"})]})]})})]})}))),we=n(53),Se=(n(188),function(){function e(){Object(d.a)(this,e),this.macAddreess="",this.ipv4Address="",this.netmask=0,this.dns=[],this.gateway="",this.ipv6Address=""}return Object(b.a)(e,null,[{key:"parse",value:function(t){if(t&&void 0!==t.macAddreess&&void 0!==t.ipv4Address&&void 0!==t.netmask&&void 0!==t.dns&&void 0!==t.gateway&&void 0!==t.ipv6Address){var n=new e;return n.macAddreess=t.macAddreess,n.ipv4Address=t.ipv4Address,n.netmask=t.netmask,n.dns=t.dns,n.gateway=t.gateway,n.ipv6Address=t.ipv6Address,n}return null}}]),e}()),ke=function(){function e(){Object(d.a)(this,e),this.identifier=null,this.hostname=null,this.name=null,this.status=null,this.networkInterfaces=[],this.description=null}return Object(b.a)(e,null,[{key:"parse",value:function(t){if(t&&void 0!==t.hostname&&void 0!==t.name&&void 0!==t.status){var n=new e;if(n.hostname=t.hostname,n.name=t.name,n.status=t.status,null!=t.networkInterfaces&&Array.isArray(t.networkInterfaces))for(var a=0;a<t.networkInterfaces.length;a+=1)n.networkInterfaces.push(Se.parse(t.networkInterfaces[a]));return n}return null}}]),e}(),Ae=function(){function e(){Object(d.a)(this,e),this.identifier=null,this.isBroadcasting=null,this.isCidRestricted=null,this.phoneNumber=null,this.port=null,this.portType=null,this.status=null}return Object(b.a)(e,null,[{key:"parse",value:function(t){if(t&&void 0!==t.identifier&&void 0!==t.isBroadcasting&&void 0!==t.isCidRestricted&&void 0!==t.phoneNumber&&void 0!==t.port&&void 0!==t.portType&&void 0!==t.status){var n=new e;return n.identifier=t.identifier,n.isBroadcasting=t.isBroadcasting,n.isCidRestricted=t.isCidRestricted,n.phoneNumber=t.phoneNumber,n.port=t.port,n.portType=t.portType,n.status=t.status,n}return null}}]),e}(),Ne=function(){function e(){Object(d.a)(this,e),this.rtcLines=[]}return Object(b.a)(e,null,[{key:"compare",value:function(e,t){return e.port<t.port?-1:e.port>t.port?1:0}},{key:"parse",value:function(t){if(t&&void 0!==t.rtcLines){var n=new e;if(null!=t.rtcLines&&Array.isArray(t.rtcLines)){for(var a=0;a<t.rtcLines.length;a+=1)n.rtcLines.push(Ae.parse(t.rtcLines[a]));n.rtcLines.sort(e.compare)}return n}return null}}]),e}(),Te=function(){function e(){Object(d.a)(this,e),this.identifier=null,this.name=null,this.status=null,this.description=null}return Object(b.a)(e,null,[{key:"parse",value:function(t){if(t&&void 0!==t.name&&void 0!==t.status){var n=new e;return n.name=t.name,n.status=t.status,n}return null}}]),e}(),Ce=function(){function e(){Object(d.a)(this,e),this.name="CPU",this.className="cpu-container",this.usagePercent=null}return Object(b.a)(e,null,[{key:"parse",value:function(t){if(t&&void 0!==t.identifier&&void 0!==t.usagePercent){var n=new e;return n.identifier=t.identifier,n.usagePercent=t.usagePercent,n}return null}}]),e}(),Ee=function(){function e(){Object(d.a)(this,e),this.identifier=null,this.name="M\xe9moire",this.className="memory-container",this.used=null,this.free=null,this.total=null,this.measure=null,this.usagePercent=null}return Object(b.a)(e,null,[{key:"parse",value:function(t){if(t&&void 0!==t.identifier&&void 0!==t.used&&void 0!==t.free&&void 0!==t.total&&void 0!==t.measure){var n=new e;return n.identifier=t.identifier,n.used=t.used,n.free=t.free,n.total=t.total,n.measure=t.measure,n.usagePercent=t.usagePercent,n}return null}}]),e}(),Pe=function(){function e(){Object(d.a)(this,e),this.identifier=null,this.name=null,this.used=null,this.free=null,this.total=null,this.measure=null,this.usagePercent=null}return Object(b.a)(e,null,[{key:"parse",value:function(t){if(t&&void 0!==t.identifier&&void 0!==t.name&&void 0!==t.used&&void 0!==t.free&&void 0!==t.total&&void 0!==t.measure){var n=new e;return n.identifier=t.identifier,n.name=t.name,n.used=t.used,n.free=t.free,n.total=t.total,n.measure=t.measure,n.usagePercent=t.usagePercent,n}return null}}]),e}(),Re=function(){function e(){Object(d.a)(this,e),this.identifier=null,this.cpu=null,this.memory=null,this.storageDisks=[]}return Object(b.a)(e,null,[{key:"parse",value:function(t){if(t&&void 0!==t.identifier&&(console.log(t),void 0!==t.cpu&&void 0!==t.memory&&void 0!==t.storageDisks)){var n=new e;if(n.identifier=t.identifier,n.cpu=Ce.parse(t.cpu),n.memory=Ee.parse(t.memory),null!=t.storageDisks&&Array.isArray(t.storageDisks))for(var a=0;a<t.storageDisks.length;a+=1)n.storageDisks.push(Pe.parse(t.storageDisks[a]));return n}return null}}]),e}(),Ie=function(){function e(){Object(d.a)(this,e),this.identifier=null,this.hardwares=[],this.softwares=[],this.stapServer=null,this.twilightSensorStatus=null,this.rtcGateway=null}return Object(b.a)(e,null,[{key:"compare",value:function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}},{key:"parse",value:function(t){if(t&&void 0!==t.identifier&&void 0!==t.hardwares&&void 0!==t.softwares&&void 0!==t.stapServer&&void 0!==t.twilightSensorStatus&&void 0!==t.rtcGateway){var n=new e;if(n.identifier=t.identifier,n.twilightSensorStatus=t.identifier,n.stapServer=Re.parse(t.stapServer),null!=t.hardwares&&Array.isArray(t.hardwares)){for(var a=0;a<t.hardwares.length;a+=1)n.hardwares.push(ke.parse(t.hardwares[a]));n.hardwares.sort(e.compare)}if(null!=t.softwares&&Array.isArray(t.softwares)){for(var r=0;r<t.softwares.length;r+=1)n.softwares.push(Te.parse(t.softwares[r]));n.softwares.sort(e.compare)}return n.rtcGateway=Ne.parse(t.rtcGateway),n}return null}}]),e}(),Le=function(){function e(){Object(d.a)(this,e),this.identifier=null,this.inputblock=0,this.hardware=null,this.component=null,this.mode=null,this.isTransmitting=!1,this.isReceiving=!1}return Object(b.a)(e,null,[{key:"parse",value:function(t){if(t&&void 0!==t.inputblock&&void 0!==t.hardware&&void 0!==t.component&&void 0!==t.mode){var n=new e;return n.identifier=t.identifier,n.inputblock=t.inputblock,n.hardware=t.hardware,n.component=t.component,n.mode=t.mode,n.isTransmitting=t.isTransmitting,n.isReceiving=t.isReceiving,n}return null}}]),e}(),De=(n(189),function(e){var t=e.hards,n=Object(a.useState)(null),r=Object(l.a)(n,2),s=r[0],i=r[1],c=Object(a.useState)(t),o=Object(l.a)(c,2),u=o[0],d=o[1];Object(a.useEffect)((function(){d(t)}),[t,d]);var b={header:{width:"8em",textAlign:"center"},body:{textAlign:"center",overflow:"visible"}};return Object(N.jsxs)(ve.DataTable,{value:u,rowHover:!0,paginator:!0,rows:5,emptyMessage:"Aucun appareil d\xe9tect\xe9",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],expandedRows:s,onRowToggle:function(e){return i(e.data)},onRowCollapse:function(e){return function(e){var t=e.data,n=u.findIndex((function(e){return e.macAddreess===t.macAddreess})),a=Object($.a)(u);a[n].isRowOpen=!1,d(a)}(e)},onRowExpand:function(e){return function(e){var t=e.data,n=u.findIndex((function(e){return e.macAddreess===t.macAddreess})),a=Object($.a)(u);a[n].isRowOpen=!0,d(a)}(e)},rowExpansionTemplate:function(e){var t="Cartes r\xe9seau de ".concat(e.description);return Object(N.jsxs)("div",{className:"orders-subtable",children:[Object(N.jsx)("h5",{children:t}),Object(N.jsxs)(ve.DataTable,{value:e.networkInterfaces,children:[Object(N.jsx)(Oe.Column,{style:{textAlign:"center"},field:"macAddreess",header:"Adresse MAC"}),Object(N.jsx)(Oe.Column,{style:{textAlign:"center"},field:"ipv4Address",header:"Adresse IPv4"}),Object(N.jsx)(Oe.Column,{style:{textAlign:"center"},field:"netmask",header:"Masque de sous-r\xe9seau"}),Object(N.jsx)(Oe.Column,{style:{textAlign:"center"},field:"gateway",header:"Passerelle par d\xe9faut"}),Object(N.jsx)(Oe.Column,{style:{textAlign:"center"},field:"dns",header:"Serveurs DNS"})]})]})},dataKey:"description",children:[Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1"},expander:!0,style:{width:"2em"}}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center"},header:"Nom de l'h\xf4te",body:function(e){var t=e.description||e.name;return Object(N.jsx)("span",{children:t})},bodyStyle:b.body}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center"},header:"Statut",body:function(e){return"UP"!==e.status?Object(N.jsx)(L.Tag,{value:e.status,severity:"danger"}):Object(N.jsx)(L.Tag,{value:e.status,severity:"success"})},bodyStyle:b.body})]})}),Be=(n(190),function(e){var t=e.vhf;return Object(N.jsx)(ee.Card,{title:"VHF",children:Object(N.jsx)("div",{className:"template-container",children:Object(N.jsx)("div",{className:"name-container",children:t?Object(N.jsxs)("div",{className:"vhf-mode-container",children:[Object(N.jsxs)("span",{className:"mode ".concat(t.isReceiving?"activated":""),children:[Object(N.jsx)("p",{children:"RX"}),Object(N.jsx)("div",{})]}),Object(N.jsxs)("span",{className:"mode ".concat(t.isTransmitting?"activated":""),children:[Object(N.jsx)("p",{children:"TX"}),Object(N.jsx)("div",{})]})]}):null})})})}),Me="CREATE_ALERT",Fe="RESET_ALERTS",Ue=function(){function e(){Object(d.a)(this,e),e.total+=1,this.identifier=e.total,this.date=new Date,this.type="",this.detail="",this.notified=!1}return Object(b.a)(e,null,[{key:"parse",value:function(t){if(t&&void 0!==t.identifier&&void 0!==t.type&&void 0!==t.detail&&void 0!==t.date&&void 0!==t.notified){var n=new e;return n.identifier=t.identifier,n.type=t.type,n.detail=t.detail,n.notified=t.notified,n.date=new Date(t.date),n}return null}}]),e}();Ue.total=0;var _e=Ue,ze={VHF_BROADCAST:"VHF_BROADCAST",RTC_BROADCAST:"RTC_BROADCAST",VHF_RECEPTION:"VHF_RECEPTION",TWILIGHT_SENSOR:"TWILIGHT_SENSOR",WEATHER_STATION:"WEATHER_STATION",SOFTWARE:"SOFTWARE"},He=(n(191),function(e){var t=e.rtcGateways,n=function(e){return Object(N.jsx)("div",{className:"rtc-gateway-container",children:Object(N.jsx)("div",{className:"rtc-lines-container",children:e.rtcLines.map((function(e){return function(e){return e&&"FXO"===e.portType?Object(N.jsxs)("div",{className:"rtc-line",children:[Object(N.jsx)("h5",{children:e.phoneNumber?e.phoneNumber:"Non attribu\xe9"}),Object(N.jsxs)("div",{className:"rtc-line-port",children:[e.isCidRestricted?Object(N.jsx)(L.Tag,{className:"p-mr-2",severity:"warning",value:"D\xe9connect\xe9"}):Object(N.jsx)(L.Tag,{className:"p-mr-2",severity:"success",value:"En ligne"}),Object(N.jsx)("div",{className:String("port-status-").concat(!e.isCidRestricted)}),Object(N.jsx)("div",{className:"activity",children:e.isBroadcasting?Object(N.jsx)(L.Tag,{className:"p-mr-2",severity:"success",value:"Diffusion"}):Object(N.jsx)(L.Tag,{className:"p-mr-2",severity:"warning",value:"En attente"})})]})]},e.identifier):null}(e)}))})})};return Object(N.jsx)(ee.Card,{title:"Passerelles T\xe9l\xe9phoniques",children:t?0===t[0].rtcLines.length?Object(N.jsx)("p",{className:"no-data",children:"Aucun service trouv\xe9"}):t.length>0&&t[0].rtcLines.length>0?Object(N.jsx)("div",{className:"template-rtc-gateway-container",children:Object(N.jsx)("div",{className:"name-container",children:t.map((function(e){return n(e)}))})}):null:Object(N.jsx)(ue.ProgressSpinner,{})})}),Ve=function(){function e(){Object(d.a)(this,e),this.identifier=0,this.city="",this.country=""}return Object(b.a)(e,null,[{key:"parse",value:function(t){if(t&&void 0!==t.identifier&&void 0!==t.city&&void 0!==t.country){var n=new e;return n.identifier=t.identifier,n.city=t.city,n.country=t.country,n}return null}}]),e}(),Ge=function(){function e(){Object(d.a)(this,e),this.identifier=null,this.position=null,this.qfuThreshold1=null,this.qfuThreshold2=null,this.isLightingOn=!1}return Object(b.a)(e,null,[{key:"parse",value:function(t){if(t&&void 0!==t.identifier&&void 0!==t.qfuThreshold1&&void 0!==t.qfuThreshold2&&void 0!==t.isLightingOn){var n=new e;return n.identifier=t.identifier,n.qfuThreshold1=t.qfuThreshold1,n.qfuThreshold2=t.qfuThreshold2,n.isLightingOn=t.isLightingOn,n.position=t.position,n}return null}}]),e}(),qe=function(){function e(){Object(d.a)(this,e),this.identifier=0,this.icao="",this.name="",this.localization=new Ve,this.airportType="",this.runways=[]}return Object(b.a)(e,null,[{key:"parse",value:function(t){if(t&&void 0!==t.identifier&&void 0!==t.icao&&void 0!==t.name&&void 0!==t.localization&&void 0!==t.airportType){var n=new e;if(n.identifier=t.identifier,n.icao=t.icao,n.name=t.name,n.localization=Ve.parse(t.localization),n.airportType=t.airportType,null!=t.runways&&Array.isArray(t.runways))for(var a=0;a<t.runways.length;a+=1)n.runways.push(Ge.parse(t.runways[a]));return n}return null}}]),e}(),We=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this,String("/api/v0").concat("/monitoring"))).baseUrl=String("/api/v0").concat("/monitoring"),e}return Object(b.a)(n,[{key:"getSoftwares",value:function(e){var t=this;return this.url=String(this.baseUrl).concat("/softwares"),new Promise((function(a,r){return[Object(B.a)(Object(M.a)(n.prototype),"get",t).call(t,e).then((function(e){var t=[];if(Array.isArray(e))for(var r=0;r<e.length;r+=1)t.push(Te.parse(e[r]));else t.push(Te.parse(e));for(var s=0;s<t.length;s+=1)switch(t[s].name){case"ACAPELA":t[s].description="Logiciel de synth\xe8se vocale";break;case"ASTERISK":t[s].description="Logiciel de t\xe9l\xe9phonie";break;case"LDAP":t[s].description="Logiciel de gestion des comptes utilisateur";break;case"SQL":t[s].description="Logiciel de gestion de base de donn\xe9e";break;case"DOCKER":t[s].description="Logiciel d'isolation applicative"}a(t.sort(n.sortByName))})).catch((function(e){r(e)}))]}))}},{key:"getHardwares",value:function(e){var t=this;return this.url=String(this.baseUrl).concat("/hardwares"),new Promise((function(a,r){return[Object(B.a)(Object(M.a)(n.prototype),"get",t).call(t,e).then((function(e){var t=[];if(Array.isArray(e))for(var r=0;r<e.length;r+=1)t.push(ke.parse(e[r]));else t.push(ke.parse(e));for(var s=0;s<t.length;s+=1)switch(t[s].name){case"AUDIO_CODE":t[s].description="Passerelle T\xe9l\xe9phonique";break;case"BOITIER_ES":t[s].description="Boitier Entr\xe9es/Sorties";break;case"SERVER":t[s].description="Serveur STAP";break;case"ROUTER_4G":t[s].description="Passerelle Internet"}a(t.sort(n.sortByName))})).catch((function(e){r(e)}))]}))}},{key:"getPerformences",value:function(e){var t=this;return this.url=String(this.baseUrl).concat("/performences"),new Promise((function(a,r){return[Object(B.a)(Object(M.a)(n.prototype),"get",t).call(t,e).then((function(e){var t=[];if(Array.isArray(e))for(var n=0;n<e.length;n+=1)t.push(Re.parse(e[n]));else t=Re.parse(e);a(t)})).catch((function(e){r(e)}))]}))}},{key:"getRtcGateways",value:function(e){var t=this;return this.url=String(this.baseUrl).concat("/rtc-gateways"),new Promise((function(a,r){return[Object(B.a)(Object(M.a)(n.prototype),"get",t).call(t,e).then((function(e){var t=[];if(Array.isArray(e))for(var n=0;n<e.length;n+=1)t.push(Ne.parse(e[n]));else t.push(Ne.parse(e));a(t)})).catch((function(e){r(e)}))]}))}},{key:"getVhfs",value:function(e){var t=this;return this.url=String(this.baseUrl).concat("/vhfs"),new Promise((function(a,r){return[Object(B.a)(Object(M.a)(n.prototype),"get",t).call(t,e).then((function(e){var t=[];if(Array.isArray(e))for(var n=0;n<e.length;n+=1)t.push(qe.parse(e[n]));else t.push(qe.parse(e));a(t)})).catch((function(e){r(e)}))]}))}},{key:"getTwilightSensor",value:function(e){var t=this;return new Promise((function(a,r){return[Object(B.a)(Object(M.a)(n.prototype),"get",t).call(t,e).then((function(e){var t=[];if(Array.isArray(e))for(var n=0;n<e.length;n+=1)t.push(qe.parse(e[n]));else t.push(qe.parse(e));a(t)})).catch((function(e){r(e)}))]}))}}],[{key:"sortByName",value:function(e,t){return e.description>t.description?1:-1}}]),n}(z),Je=function(){function e(){Object(d.a)(this,e),this.identifier=0,this.isTransmitting=!1,this.isReceiving=!1}return Object(b.a)(e,null,[{key:"parse",value:function(t){if(t){var n=new e;return n.identifier=t.identifier,n.isTransmitting=t.isTransmitting,n.isReceiving=t.isReceiving,n}return null}}]),e}(),Ze=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.call(this,String("/api/v0").concat("/aerial-vhf"))}return Object(b.a)(n,[{key:"get",value:function(e){var t=this;return new Promise((function(a,r){return[Object(B.a)(Object(M.a)(n.prototype),"get",t).call(t,e).then((function(e){var t=[];if(Array.isArray(e))for(var n=0;n<e.length;n+=1)t.push(Je.parse(e[n]));else t.push(Je.parse(e));a(t)})).catch((function(e){r(e)}))]}))}}]),n}(z),Ke=n(93),Xe=(n(195),function(e){var t=e.title,n=e.data,r=e.field,s=e.watchDog,i=Object(a.useState)(n),c=Object(l.a)(i,2),o=c[0],u=c[1];Object(a.useEffect)((function(){u(n)}),[u,n]);var d=function(e){return e&&"Logiciels"===t?Object(N.jsxs)("div",{className:"template-container",children:[Object(N.jsxs)("div",{className:"info-container",children:[Object(N.jsx)("div",{className:"name-container",children:Object(N.jsx)("p",{children:e[r]})}),Object(N.jsx)("div",{className:"UP"===e.status?"green-round":"red-round"})]}),Object(N.jsx)(ne.Button,{icon:"pi pi-undo",className:"p-button-rounded p-button-primary",disabled:!0})]}):e?Object(N.jsx)("div",{className:"template-container",children:Object(N.jsxs)("div",{className:"info-container",children:[Object(N.jsx)("div",{className:"name-container",children:Object(N.jsx)("p",{children:e[r]})}),s?Object(N.jsx)("div",{className:e.isAlive?"green-round":"red-round"}):Object(N.jsx)("div",{className:"UP"===e.status?"green-round":"red-round"})]})}):null};return Object(N.jsx)("div",{className:"CardListBox",children:Object(N.jsx)(ee.Card,{title:t,className:"Card",children:o?0===o.length?Object(N.jsx)("p",{className:"no-data",children:"Aucun service trouv\xe9"}):o.length>0?Object(N.jsx)(Ke.ListBox,{options:o,itemTemplate:d}):null:Object(N.jsx)(ue.ProgressSpinner,{})})})}),Ye=n(63),Qe=(n(197),function(e){return e>=70&&e<85?"orange":e>=85?"red":"#007bff"}),$e=function(e){var t=e.processor,n=e.memory,r=e.storage,s=Object(a.useState)(t),i=Object(l.a)(s,2),c=i[0],o=i[1],u=Object(a.useState)(n),d=Object(l.a)(u,2),b=d[0],j=d[1],f=Object(a.useState)(r),h=Object(l.a)(f,2),p=h[0],O=h[1];Object(a.useEffect)((function(){o(t)}),[o,t]),Object(a.useEffect)((function(){j(n)}),[j,n]),Object(a.useEffect)((function(){O(r)}),[O,r]);return Object(N.jsxs)("div",{className:"fourth-part",children:[c?Object(N.jsxs)("div",{className:"data-container cpu",children:[Object(N.jsx)("span",{children:"Processeur"}),Object(N.jsx)(Ye.ProgressBar,{color:Qe(c.usagePercent),value:c.usagePercent})]}):null,b?Object(N.jsxs)("div",{className:"data-container ram",children:[Object(N.jsx)("span",{children:"M\xe9moire RAM"}),Object(N.jsx)(Ye.ProgressBar,{color:Qe(b.usagePercent),value:b.usagePercent})]}):null,p&&p.length>0?p.map((function(e){return Object(N.jsxs)("div",{className:"disks-container data-container",children:[Object(N.jsxs)("span",{children:["Disques de stockage"," ",e.name]}),Object(N.jsx)(Ye.ProgressBar,{color:Qe(e.usagePercent),value:e.usagePercent})]},e)})):null]})},et=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.call(this,String("/api/v0").concat("/watch-dogs"))}return Object(b.a)(n,[{key:"getAllWatchDogs",value:function(){var e=this;return new Promise((function(t,a){Object(B.a)(Object(M.a)(n.prototype),"get",e).call(e).then((function(e){t(e)})).catch((function(e){a(e)}))}))}}]),n}(z),tt=Object(h.g)(Object(o.b)(null,(function(e){return{createAlertInStore:function(t){return e({type:Me,data:t})},setErrorInState:function(t){return e(y(t))}}}))((function(e){var t=e.createAlertInStore,n=e.setErrorInState,r=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"onError",value:function(){}},{key:"onMessage",value:function(e){var t=C.getJson(e.data);if(t){var n=Ie.parse(t);if(null!==n)o(n);else{var a=Le.parse(t);null!==a&&m(a)}}}},{key:"onOpen",value:function(){}},{key:"onClose",value:function(){}}]),n}(C),s=Object(a.useState)(null),i=Object(l.a)(s,2),c=i[0],o=i[1],u=Object(a.useState)(new Le),h=Object(l.a)(u,2),p=h[0],m=h[1],g=Object(a.useState)(null),x=Object(l.a)(g,2),y=x[0],w=x[1],S=Object(a.useState)(null),k=Object(l.a)(S,2),A=k[0],T=k[1],E=Object(a.useState)(null),P=Object(l.a)(E,2),I=P[0],L=P[1],D=Object(a.useState)(null),B=Object(l.a)(D,2),M=B[0],F=B[1],U=Object(a.useState)(null),_=Object(l.a)(U,2),z=_[0],H=_[1];R.getInstance().setEventListener(new r);var V=Object(a.useCallback)(Object(v.a)(O.a.mark((function e(){var t,a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new We,a=new et,r=new Ze,t.getRtcGateways({}).then((function(e){w(e)})).catch((function(e){n(e.response?e.response.status:e.status||500)})),t.getHardwares({}).then((function(e){T(e)})).catch((function(e){n(e.response?e.response.status:e.status||500)})),t.getSoftwares({}).then((function(e){L(e)})).catch((function(e){n(e.response?e.response.status:e.status||500)})),t.getPerformences({}).then((function(e){F(e)})).catch((function(e){n(e.response?e.response.status:e.status||500)})),r.get({}).then((function(e){e&&Array.isArray(e)&&e.length>0?m(e[0]):m(new Le)})).catch((function(e){n(e.response?e.response.status:e.status||500)})),a.getAllWatchDogs().then((function(e){H(e)})).catch((function(e){n(e.response?e.response.status:e.status||500)}));case 9:case"end":return e.stop()}}),e)}))),[n]);Object(a.useEffect)((function(){V()}),[V]);var G=Object(a.useCallback)((function(){if(c){for(var e=0;e<c.hardwares.length;e+=1){var n=c.hardwares[e];if("Critic"===n.status||"D\xe9connect\xe9"===n.status){var a=new _e;a.date=new Date,a.detail=String(n.description).concat(" subit une erreur."),a.type=ze.SOFTWARE,t(a)}}for(var r=0;r<c.softwares.length;r+=1){var s=c.softwares[r];if("Critic"===s.status||"D\xe9connect\xe9"===s.status){var i=new _e;i.date=new Date,i.detail=String(s.description).concat(" subit une erreur."),i.type=ze.SOFTWARE,t(i)}}}}),[t,c]);return Object(a.useEffect)((function(){G()}),[G]),Object(N.jsx)("main",{children:Object(N.jsxs)("section",{children:[Object(N.jsxs)(we.Fieldset,{className:"monitoring-fieldset",legend:"Surveillance en direct",toggleable:!0,children:[Object(N.jsxs)("div",{className:"first-part",children:[Object(N.jsx)(Be,{vhf:p}),Object(N.jsx)(He,{rtcGateways:y})]}),Object(N.jsxs)("div",{className:"second-part",children:[Object(N.jsx)(Xe,{title:"Logiciels",data:I,field:"name"}),Object(N.jsx)(Xe,{title:"Mat\xe9riels",data:A,field:"name"})]}),Object(N.jsx)("div",{className:"third-part",children:Object(N.jsx)(Xe,{title:"Processus",data:z,field:"name",watchDog:!0})}),M?Object(N.jsx)($e,{processor:M.cpu,memory:M.memory,storage:M.storageDisks}):null]}),Object(N.jsx)(we.Fieldset,{className:"setting-newtwork-fieldset",legend:"Param\xe8tres des appareils connect\xe9s",toggleable:!0,children:Object(N.jsx)(De,{hards:A})})]})})}))),nt=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.call(this,String("/api/v0").concat("/alerts"))}return Object(b.a)(n,[{key:"get",value:function(e){var t=this;return new Promise((function(a,r){return[Object(B.a)(Object(M.a)(n.prototype),"get",t).call(t,e).then((function(e){var t=[];e.forEach((function(e){t.push(_e.parse(e))})),a(t)})).catch((function(e){r(e)}))]}))}}]),n}(z),at=(n(198),function(e){var t=Object(a.useState)(e.alerts),n=Object(l.a)(t,2),r=n[0],s=n[1];Object(a.useEffect)((function(){s(e.alerts)}),[e.alerts]);return Object(N.jsx)("div",{children:Object(N.jsx)("div",{className:"card",children:Object(N.jsxs)(ve.DataTable,{value:r,paginator:!0,header:e.header(),rows:10,rowsPerPageOptions:[10,30,60],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",emptyMessage:"Il n'y a aucune alerte.",children:[Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center"},style:{textAlign:"center"},body:function(e){return e?Object(N.jsx)(N.Fragment,{children:new V(new Date(e.date)).format("dd-MM-yyyy hh:mm:ss UTC")}):null},header:"Date"}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center"},style:{textAlign:"center"},filter:!0,filterPlaceholder:"Rechercher par type",field:"type",header:"Type"}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center"},style:{textAlign:"center"},field:"detail",header:"Description"})]})})})}),rt=Object(o.b)(null,(function(e){return{setErrorInState:function(t){return e(y(t))}}}))((function(e){var t=e.setErrorInState,n=Object(a.useState)(null),r=Object(l.a)(n,2),s=r[0],i=r[1],c=Object(a.useCallback)(Object(v.a)(O.a.mark((function e(){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new nt,e.next=4,n.get({});case 4:a=e.sent,i(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(e.t0.response?e.t0.response.status:e.t0.status||500);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[t]);Object(a.useEffect)((function(){c()}),[c]);return Object(N.jsx)("main",{children:Object(N.jsx)("section",{children:Object(N.jsx)(at,{header:function(){return Object(N.jsx)("div",{className:"table-header",children:Object(N.jsx)("h3",{children:"Liste des alertes"})})},alerts:s})})})})),st=n(228),it=function(){function e(){Object(d.a)(this,e),this.identifier=null,this.date=null,this.broadcastType=null,this.broadcastOrder=null,this.isBroadcasting=!1}return Object(b.a)(e,null,[{key:"parse",value:function(t){if(t&&void 0!==t.identifier&&void 0!==t.date&&void 0!==t.broadcastType){var n=new e;return n.identifier=t.identifier,n.date=t.date,n.broadcastType=t.broadcastType,n.broadcastOrder=t.broadcastOrder,n.isBroadcasting=t.isBroadcasting,n}return null}}]),e}();var ct=function(e){return e.split(".").join(".\r\n")},ot=function(){function e(){Object(d.a)(this,e),this.identifier=null,this.bulletinIdentifier=null,this.bulletinName=null,this.language=null,this.decodedText=null,this.voice=null,this.vocalSynthesisDateStart=null,this.vocalSynthesisDateEnd=null,this.audioFilePath=null,this.broadcasts=[],this.status=null,this.error=null,this.audioFormat=null,this.frequency=null,this.isPlaying=!1,this.isRowOpen=!1,this.isBroadcasting=!1}return Object(b.a)(e,[{key:"isCurrentlyBroadcasting",value:function(){for(var e=!1,t=0;t<this.broadcasts.length;t+=1)this.broadcasts[t].isBroadcasting&&(e=!0);return e}}],[{key:"parse",value:function(t){if(t&&void 0!==t.identifier&&void 0!==t.language&&void 0!==t.decodedText&&void 0!==t.voice&&void 0!==t.vocalSynthesisDateStart&&void 0!==t.audioFilePath&&void 0!==t.status){var n=new e;if(n.identifier=t.identifier,0===n.identifier&&(n.identifier=Object(st.a)()),n.bulletinIdentifier=t.bulletinIdentifier,n.bulletinName=t.bulletinName,n.language=t.language.toUpperCase(),n.decodedText=ct(t.decodedText),n.voice=t.voice,n.vocalSynthesisDateStart=new Date(t.vocalSynthesisDateStart),n.vocalSynthesisDateEnd=new Date(t.vocalSynthesisDateEnd),n.audioFilePath=t.audioFilePath,n.isAudioFileExists=t.isAudioFileExists,n.status=t.status,n.error=t.error,null!=t.broadcasts&&Array.isArray(t.broadcasts))for(var a=0;a<t.broadcasts.length;a+=1)n.broadcasts.push(it.parse(t.broadcasts[a]));n.frequency=String(n.voice.match(/\d+/g)).concat("k"),n.voice=n.voice.split(n.frequency)[0];var r=n.audioFilePath.split(".");return n.audioFormat=r[r.length-1],n.isBroadcasting=n.isCurrentlyBroadcasting(),n}return null}}]),e}(),ut=function(){function e(){Object(d.a)(this,e),this.identifier=null,this.name=null,this.airport=null,this.date=null,this.report_type=null,this.raw_text=null,this.translations=[],this.status=null,this.isOutdated=null,this.error=null,this.isRowOpen=!1,this.airport_icao=null,this.airport_name=null,this.decoded_text=null,this.validityLeft=null,this.validityLeftColor=null,this.vocal_synthesis_date=null,this.className=null,this.errorMessage=null,this.weatherTelemetries=[]}return Object(b.a)(e,null,[{key:"compare",value:function(e,t){return e.language<t.language?-1:e.language>t.language?1:0}},{key:"parse",value:function(t){if(t&&void 0!==t.identifier&&void 0!==t.name&&void 0!==t.date&&void 0!==t.reportType&&void 0!==t.rawText&&void 0!==t.status&&void 0!==t.translations){var n=new e;if(n.identifier=t.identifier,n.name=t.name,n.date=t.date,n.report_type=t.reportType,n.raw_text=t.rawText,n.status=t.status,n.isOutdated=t.isOutdated,n.error=t.error,null!=t.translations&&Array.isArray(t.translations))for(var a=0;a<t.translations.length;a+=1)t.translations[a].bulletinIdentifier=t.identifier,t.translations[a].bulletinName=t.name,n.translations.push(ot.parse(t.translations[a])),"ERROR"===t.translations[a].status&&(n.status=t.translations[a].status);return n.weatherTelemetries=t.weatherTelemetries,n.translations.sort(e.compare),n}return null}}]),e}(),lt=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.call(this,String("/api/v0").concat("/bulletins"))}return Object(b.a)(n,[{key:"get",value:function(e){var t=this;return new Promise((function(a,r){return[Object(B.a)(Object(M.a)(n.prototype),"get",t).call(t,e).then((function(e){var t=[];if(Array.isArray(e))for(var n=0;n<e.length;n+=1)t.push(ut.parse(e[n]));else t.push(ut.parse(e));a(t)})).catch((function(e){r(e)}))]}))}},{key:"getAudioBulletin",value:function(){var e=Object(v.a)(O.a.mark((function e(t,n,a){var r,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={Authorization:"Bearer ".concat(t)},e.next=4,_.a.get("".concat(this.url,"/").concat(a,"/").concat(n.toUpperCase(),"/download"),{responseType:"blob",headers:r});case 4:return s=e.sent,e.abrupt("return",{status:s.status,blob:s.data});case 8:if(e.prev=8,e.t0=e.catch(0),console.error(e.t0),!e.t0.response){e.next=13;break}return e.abrupt("return",{status:e.t0.response.status,message:e.t0.response.statusText});case 13:return e.abrupt("return",{status:500,message:e.t0.message});case 14:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t,n,a){return e.apply(this,arguments)}}()}]),n}(z),dt=n(38),bt=n(60),jt=n.n(bt),ft=(n(199),function(e){if(null!=e)switch(e){case"FRENCH":return"FRA";case"ENGLISH":return"GBR"}return null}),ht=Object(o.b)(null,(function(e){return{setErrorInState:function(t){return e(y(t))}}}))((function(e){var t=function(t){Object(j.a)(a,t);var n=Object(f.a)(a);function a(){return Object(d.a)(this,a),n.apply(this,arguments)}return Object(b.a)(a,[{key:"onOpen",value:function(e){console.info("Websocket client is now connected.",e)}},{key:"onError",value:function(e){console.error(e)}},{key:"onMessage",value:function(t){var n=C.getJson(t.data);if(n){var a=ut.parse(n);if(null!==a){var r=Object($.a)(c),s=r.findIndex((function(e){return e.name===a.name}));if(-1===s)r.unshift(a),r.length>60&&r.pop();else if(e.refreshData)if(r[s]=a,"READY"===a.status){var i=!1;if(null!=a.translations)for(var u=0;u<a.translations.length;u+=1){var l=a.translations[u].broadcasts;null!=l&&0!==l.length||(i=!0)}i&&e.setDoRequest(!0)}else"ERROR"===a.status&&e.setDoRequest(!0);o(r)}}}},{key:"onClose",value:function(e){console.info(this,"Websocket clientis now disconnected.",e)}}]),a}(C),n=Object(se.a)(),r=Object(l.a)(n,1)[0],s=Object(a.useState)([]),i=Object(l.a)(s,2),c=i[0],o=i[1],u=Object(a.useState)(!1),h=Object(l.a)(u,2),p=h[0],g=h[1],x=Object(a.useState)(null),y=Object(l.a)(x,2),w=y[0],S=y[1],k=Object(a.useState)(null),A=Object(l.a)(k,2),T=A[0],E=A[1],P=Object(a.useRef)(null),I=Object(a.useState)(null),D=Object(l.a)(I,2),B=D[0],M=D[1],F=document.getElementsByClassName("audio-element")[0];R.getInstance().setEventListener(new t),Object(a.useEffect)((function(){e.values&&(o(e.values),console.log(e.values))}),[e]);var U=function(e){return Object(N.jsx)("i",{onClick:function(t){return n=e.decodedText,g(!0),void S(n);var n},className:"pi pi-info-circle"})},_=function(e){return e&&e.language?Object(N.jsx)(jt.a,{code:ft(e.language),height:20}):Object(N.jsx)("span",{children:"Langue en cours de r\xe9cup\xe9ration"})},z=function(e){var t="badge-".concat(Object(st.a)().toString().replace("-",""));return e?"ERROR"===e.status||e.error?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(dt.Tooltip,{target:".".concat(t),content:e.error,position:"bottom"}),Object(N.jsx)(W.Badge,{id:t,value:e.status,severity:"danger"})]}):"PROCESSING"===e.status?Object(N.jsx)(W.Badge,{value:e.status,severity:"warning"}):e.isAudioFileExists?Object(N.jsx)(W.Badge,{value:"Disponible",severity:"success"}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(dt.Tooltip,{target:".".concat(t),content:"Audio file not exists.",position:"bottom"}),Object(N.jsx)(W.Badge,{id:t,value:"ERROR",severity:"danger",className:"status-".concat(e.status," ").concat(t)})]}):null},H=function(){var t=Object(v.a)(O.a.mark((function t(n,a){var s,i,u,l,d,b,j;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"READY"===a.status){t.next=5;break}P.current.show({severity:"error",summary:"Erreur",detail:"Message audio indisponible ( voir les param\xe8tres de l'audio )",life:3e3}),t.next=20;break;case 5:if(s=Object($.a)(c),i=F.audioBulletinIdentifier,u=s.findIndex((function(e){return e.name===a.bulletinName})),l=s[u].translations.findIndex((function(e){return e.identifier===a.identifier})),!i||i!==a.identifier){t.next=13;break}a.isPlaying?(s[u].translations[l].isPlaying=!1,F.pause()):(s[u].translations[l].isPlaying=!0,F.play()),t.next=19;break;case 13:return s.forEach((function(e){e.translations.forEach((function(e){e.isPlaying&&(e.isPlaying=!1)}))})),d=new lt,t.next=17,d.getAudioBulletin(r.jwt,a.language,a.bulletinIdentifier);case 17:200===(b=t.sent).status?(F.audioBulletinIdentifier=a.identifier,s[u].translations[l].isPlaying=!0,j=URL.createObjectURL(b.blob),E(j),F.play()):console.error("Erreur lors du t\xe9l\xe9chargement de l'audio");case 19:o(s);case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(0),e.setErrorInState(t.t0.response?t.t0.response.status:t.t0.status||500);case 25:case"end":return t.stop()}}),t,null,[[0,22]])})));return function(e,n){return t.apply(this,arguments)}}(),G=function(e){return e&&e.isAudioFileExists?e.isPlaying?Object(N.jsx)("i",{onClick:function(t){return H(t,e)},className:"pi pi-pause"}):Object(N.jsx)("i",{onClick:function(t){return H(t,e)},className:"pi pi-play ".concat("ERREUR"===e.status?"play-error":"")}):null},q=function(e){return e.broadcasts?e.broadcasts.map((function(e){if(e.isBroadcasting){var t=null;switch(e.broadcastType){case"RTC":t="pi-phone";break;case"VHF":t="pi-wifi"}return Object(N.jsx)(L.Tag,{value:e.broadcastType,icon:String("pi ").concat(t)})}return null})):null},J=function(e){return Object(N.jsx)(L.Tag,{severity:"info",value:e.audioFormat})};return Object(N.jsxs)("div",{className:"datatable-rowexpansion-demo",children:[Object(N.jsx)("audio",{className:"audio-element",src:T,type:"audio/mpeg"}),Object(N.jsx)(m.Toast,{ref:P}),Object(N.jsx)(he.Dialog,{header:"Texte synth\xe9tis\xe9",visible:p,style:{width:"50vw"},dismissableMask:!0,onHide:function(){return g(!1)},children:function(){if(w){var e=w.split(".");return Object(N.jsx)("div",{className:"settings-wrapper",children:Object(N.jsx)("div",{className:"container",children:e.map((function(e){return Object(N.jsx)("p",{className:"DecodedSentence",children:String(e).concat(".")})}))})})}return null}()}),Object(N.jsx)("div",{className:"card",children:Object(N.jsxs)(ve.DataTable,{value:c,expandedRows:B,onRowToggle:function(e){return M(e.data)},onRowCollapse:function(e){return function(e){var t=e.data;if(t){var n=c.findIndex((function(e){return e.name===t.name})),a=Object($.a)(c);a[n].isRowOpen=!1,o(a)}return null}(e)},onRowExpand:function(e){return function(e){var t=e.data;if(t){var n=c.findIndex((function(e){return e.name===t.name})),a=Object($.a)(c);a[n].isRowOpen=!0,o(a)}return null}(e)},rowExpansionTemplate:function(e){if(e){var t="Synth\xe8ses vocales du bulletin dat\xe9 du ".concat(new V(new Date(e.date)).format("dd-MM-yyyy hh:mm:ss UTC"));return Object(N.jsxs)("div",{className:"orders-subtable",children:[Object(N.jsx)("h5",{children:t}),Object(N.jsxs)(ve.DataTable,{value:e.translations,children:[Object(N.jsx)(Oe.Column,{style:{textAlign:"center"},body:G,header:"Lecteur audio"}),Object(N.jsx)(Oe.Column,{style:{textAlign:"center"},body:_,header:"Langue"}),Object(N.jsx)(Oe.Column,{style:{textAlign:"center"},field:"voice",header:"Voix"}),Object(N.jsx)(Oe.Column,{style:{textAlign:"center"},field:"frequency",header:"Echantillonage"}),Object(N.jsx)(Oe.Column,{style:{textAlign:"center"},body:J,header:"Format audio"}),Object(N.jsx)(Oe.Column,{style:{textAlign:"center"},body:z,header:"Statut"}),Object(N.jsx)(Oe.Column,{style:{textAlign:"center"},body:q,header:"Diffusion"}),Object(N.jsx)(Oe.Column,{style:{textAlign:"center"},body:U,header:"Texte synth\xe9tis\xe9"})]})]})}return null},dataKey:"name",header:e.header(),globalFilter:e.globalFilter,rowClassName:function(){return{rowOpen:!0}},paginator:!0,rows:10,rowsPerPageOptions:[10,30,60],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",emptyMessage:"Il n'y a pas de bulletin m\xe9t\xe9o.",children:[Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1"},expander:!0,style:{width:"2em"}}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center"},style:{textAlign:"center"},body:function(e){return e?Object(N.jsx)(N.Fragment,{children:new V(new Date(e.date)).format("dd-MM-yyyy hh:mm:ss UTC")}):null},header:"Date"}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center"},style:{textAlign:"center"},body:function(e){if(e){if("ERROR"===e.status||e.error){var t="badge-".concat(Object(st.a)().toString().replace("-",""));return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(dt.Tooltip,{target:".".concat(t),content:e.error,position:"bottom"}),Object(N.jsx)(W.Badge,{id:t,value:e.status,severity:"danger",className:"customer-badge status-".concat(e.status," ").concat(t)})]})}return"READY"===e.status?e.isOutdated?Object(N.jsx)(W.Badge,{className:"background-grey",value:"Obsol\xe8te"}):Object(N.jsx)(W.Badge,{value:"Valide",severity:"success"}):Object(N.jsx)(W.Badge,{value:e.status,severity:"warning"})}return null},header:"Statut"}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center"},style:{textAlign:"center"},body:function(e){return e?Object(N.jsx)(L.Tag,{style:{fontSize:"1rem",background:"#3f51b5"},value:e.report_type}):null},header:"Protocole"}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center"},style:{textAlign:"center"},body:function(e){return e?e.translations.map((function(e){if(e){var t="badge-".concat(Object(st.a)().toString().replace("-",""));return"ERROR"===e.status||e.error?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(dt.Tooltip,{target:".".concat(t),content:e.error,position:"bottom"}),Object(N.jsx)(W.Badge,{id:t,value:e.language,severity:"danger",className:"status-".concat(e.status.toLowerCase()," ").concat(t)})]}):"PROCESSING"===e.status?Object(N.jsx)(W.Badge,{value:e.language,severity:"warning"}):e.isAudioFileExists&&"READY"===e.status?Object(N.jsx)(W.Badge,{value:e.language,severity:"success"}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(dt.Tooltip,{target:".".concat(t),content:"Audio file not exists.",position:"bottom"}),Object(N.jsx)(W.Badge,{id:t,value:e.language,severity:"danger",className:"".concat(t)})]})}return null})):null},header:"Messages audio"}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center"},style:{textAlign:"center"},body:function(e){if(e){for(var t=!1,n=0;n<e.translations.length;n+=1){for(var a=0;a<e.translations[n].broadcasts.length;a+=1)if(e.translations[n].broadcasts[a].isBroadcasting){t=!0;break}if(t)break}return t?Object(N.jsx)("i",{className:"pi pi-wifi",style:{fontSize:"2em",color:"rgba(0,200,0,1)"}}):Object(N.jsx)("i",{className:"pi pi-wifi",style:{fontSize:"1em",color:"rgba(200,200,200,1)"}})}return null},header:"Diffusion en cours"})]})})]})})),pt=Object(o.b)(null,(function(e){return{setErrorInState:function(t){return e(y(t))}}}))((function(e){var t=e.setErrorInState,n=Object(a.useState)([]),r=Object(l.a)(n,2),s=r[0],i=r[1],c=Object(a.useState)(!1),o=Object(l.a)(c,2),u=o[0],d=o[1],b=Object(a.useRef)(null),j=Object(a.useCallback)(Object(v.a)(O.a.mark((function e(){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new lt,e.next=4,n.get({limit:60,isTelemetry:!0});case 4:a=e.sent,i(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(e.t0.response?e.t0.response.status:e.t0.status||500);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[t]),f=Object(a.useCallback)((function(){u&&(j(),d(!1))}),[u,j]);Object(a.useEffect)((function(){f()}),[f]),Object(a.useEffect)((function(){j()}),[j]);return Object(N.jsxs)("main",{className:"page page-bulletins page-container",children:[Object(N.jsx)(m.Toast,{ref:b,baseZIndex:1e4}),Object(N.jsx)("section",{children:Object(N.jsx)(ht,{header:function(){return Object(N.jsx)("div",{className:"table-header",children:Object(N.jsx)("h3",{children:"Liste des bulletins"})})},values:s,setDoRequest:d,refreshData:!0})})]})})),Ot=n(74),vt=n(75),mt=n(54),gt=n(94),xt=function(){function e(){Object(d.a)(this,e),this.date=null,this.level=null,this.entity=null,this.message=null}return Object(b.a)(e,null,[{key:"compare",value:function(e,t){return e.date<t.date?-1:e.date>t.date?1:0}},{key:"parse",value:function(t){if(t&&void 0!==t.date&&void 0!==t.level&&void 0!==t.entity&&void 0!==t.message){var n=new e;return n.date=new Date(t.date),n.level=t.level,n.entity=t.entity,n.message=t.message,n}return null}}]),e}(),yt=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.call(this,String("/api/v0").concat("/event-log"))}return Object(b.a)(n,[{key:"get",value:function(e){var t=this;return new Promise((function(a,r){return[Object(B.a)(Object(M.a)(n.prototype),"get",t).call(t,e).then((function(e){var t=[];if(Array.isArray(e))for(var n=0;n<e.length;n+=1)t.push(xt.parse(e[n]));else t.push(xt.parse(e));a(t)})).catch((function(e){r(e)}))]}))}},{key:"getOldEventLog",value:function(e,t,a){var r=this;return new Promise((function(e,t){return[Object(B.a)(Object(M.a)(n.prototype),"get",r).call(r,a).then((function(t){var n=[];if(Array.isArray(t))for(var a=0;a<t.length;a+=1)n.push(xt.parse(t[a]));else n.push(xt.parse(t));e(n)})).catch((function(e){t(e)}))]}))}},{key:"download",value:function(e,t,n){var a=this;return new Promise((function(r,s){var i=String(a.url).concat("/download");e&&t&&(i=String(i).concat("/".concat(e,"/").concat(t))),_.a.get(i,{headers:a.headers,params:n},{responseType:"blob"}).then((function(e){var n=e.data,a=e.headers,r=a["File-Name"]||t||"ride4ever-ws-".concat((new Date).toJSON(),".log"),s=new Blob([n],{type:a["content-type"]}),i=document.createElement("a"),c=window.URL.createObjectURL(s);i.href=c,i.download=decodeURI(r),i.style.display="none",document.body.appendChild(i),i.click(),i.parentNode.removeChild(i),window.URL.revokeObjectURL(c)})).catch((function(e){s(e)}))}))}}]),n}(z),wt=function(){function e(){Object(d.a)(this,e),this.month=null,this.names=null}return Object(b.a)(e,null,[{key:"compare",value:function(e,t){return e.month<t.month?-1:e.month>t.month?1:0}},{key:"parse",value:function(t){if(t&&void 0!==t.month&&void 0!==t.names){var n=new e;return n.month=t.month,n.names=t.names,n}return null}}]),e}(),St=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.call(this,String("/api/v0").concat("/event-log/backups"))}return Object(b.a)(n,[{key:"get",value:function(e){var t=this;return new Promise((function(a,r){return[Object(B.a)(Object(M.a)(n.prototype),"get",t).call(t,e).then((function(e){var t=[];if(Array.isArray(e))for(var n=0;n<e.length;n+=1)t.push(wt.parse(e[n]));else t.push(wt.parse(e));a(t)})).catch((function(e){r(e)}))]}))}}]),n}(z),kt=(n(205),Object(o.b)(null,(function(e){return{setErrorInState:function(t){return e(y(t))}}}))((function(e){var t=Object(a.useState)([]),n=Object(l.a)(t,2),r=n[0],s=n[1],i=Object(a.useRef)(null);Object(a.useEffect)((function(){e.values&&s(e.values)}),[e]);return Object(N.jsxs)("div",{className:"datatable-rowexpansion-demo",children:[Object(N.jsx)(m.Toast,{ref:i}),Object(N.jsx)("div",{className:"card",children:Object(N.jsxs)(ve.DataTable,{className:"event-log-table",value:r,dataKey:"date",header:e.header(),globalFilter:e.globalFilter,rowClassName:function(){return{rowOpen:!0}},paginator:!0,rows:100,rowsPerPageOptions:[100,200,300,400,500],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",emptyMessage:"Il n'y a aucun \xe9v\xe8nement.",children:[Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center",width:"15rem"},style:{textAlign:"center",height:"auto",padding:0},body:function(e){return e?Object(N.jsx)(N.Fragment,{children:new V(new Date(e.date)).format("dd-MM-yyyy hh:mm:ss UTC")}):null},header:"Date"}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center",width:"7rem"},style:{textAlign:"center",height:"auto",padding:0},body:function(e){switch(e.level){case"TRACE":case"DEBUG":return Object(N.jsx)(W.Badge,{value:e.level,severity:"danger"});case"INFO":return Object(N.jsx)(W.Badge,{value:e.level,severity:"primary"});case"WARNING":return Object(N.jsx)(W.Badge,{value:e.level,severity:"warning"});case"ERROR":case"CRITICAL":case"FATAL":case"EXCEPTION":case"ALERT":return Object(N.jsx)(W.Badge,{value:e.level,severity:"danger"})}return e.level},header:"Niveau"}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center",width:"12rem"},style:{textAlign:"center",height:"auto",padding:0},field:"entity",header:"Composant"}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center"},style:{textAlign:"left",height:"auto",padding:0},field:"message",header:"Message"})]})})]})}))),At=(n(206),Object(o.b)(null,(function(e){return{setErrorInState:function(t){return e(y(t))}}}))((function(e){var t=e.setErrorInState,n=Object(a.useState)([]),r=Object(l.a)(n,2),s=r[0],i=r[1],c=Object(a.useState)([]),o=Object(l.a)(c,2),u=o[0],d=o[1],b=Object(a.useState)(""),j=Object(l.a)(b,2),f=j[0],h=j[1],p=Object(a.useState)("TEST"),g=Object(l.a)(p,2),x=g[0],y=g[1],w=Object(a.useState)({startDate:null,endDate:null}),S=Object(l.a)(w,2),k=S[0],A=S[1],T=Object(a.useState)(!1),C=Object(l.a)(T,2),E=C[0],P=C[1],R=Object(a.useState)("now"),I=Object(l.a)(R,2),L=I[0],D=I[1],B=Object(a.useRef)(null),M=Object(a.useState)(!1),U=Object(l.a)(M,2),_=U[0],z=U[1],H=Object(a.useState)(["TRACE","DEBUG","INFO","WARNING","ERROR","FATAL","CRITICAL","EXCEPTION"]),V=Object(l.a)(H,1)[0],G=Object(a.useState)(V),q=Object(l.a)(G,2),W=q[0],J=q[1],Z=Object(a.useCallback)(Object(v.a)(O.a.mark((function e(){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new yt,e.next=4,n.get({});case 4:a=e.sent,i(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(e.t0.response?e.t0.response.status:e.t0.status||500);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[t]),K=Object(a.useCallback)(Object(v.a)(O.a.mark((function e(){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new St,e.next=4,n.get({});case 4:a=e.sent,d(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(e.t0.response?e.t0.response.status:e.t0.status||500);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[t]),X=Object(a.useCallback)((function(){E&&(Z(),P(!1))}),[E,Z]);Object(a.useEffect)((function(){X()}),[X]),Object(a.useEffect)((function(){K(),Z()}),[Z,K]);var Y=function(){var e=new yt;if("old"===L){if(f.length>=2&&x.length>=2){var t=x;e.download(f,t)}}else"now"===L&&e.download()},Q=function(){var e=Object(v.a)(O.a.mark((function e(){var n,a,r,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new yt,"old"!==L){e.next=15;break}return n.getOldEventLog(f,x),e.prev=3,e.next=6,n.getOldEventLog(f,x);case 6:a=e.sent,i(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),t(e.t0.response?e.t0.response.status:e.t0.status||500);case 13:e.next=38;break;case 15:if("now"!==L){e.next=38;break}if(e.prev=16,!k.startDate||!k.endDate){e.next=29;break}if(!(k.startDate.timestamp>k.endDate.timestamp)){e.next=22;break}B.current.show({severity:"warn",summary:"Message d'avertissement",detail:"La date de d\xe9but ne peux pas \xeatre sup\xe8rieure \xe0 la date de fin"}),e.next=27;break;case 22:return e.next=24,n.get({from:k.startDate.timestamp,to:k.endDate.timestamp});case 24:r=e.sent,console.log(r),i(r);case 27:e.next=33;break;case 29:return e.next=31,n.get({});case 31:s=e.sent,i(s);case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(16),t(e.t1.response?e.t1.response.status:e.t1.status||500);case 38:case"end":return e.stop()}}),e,null,[[3,10],[16,35]])})));return function(){return e.apply(this,arguments)}}(),$=function(e){var t=e.target,n=t.name,a=t.value;A(Object(F.a)(Object(F.a)({},k),{},Object(ce.a)({},n,{date:a,timestamp:Date.parse(a)})))};return console.log(W),Object(N.jsxs)("main",{className:"page page-EventLogs page-container",children:[Object(N.jsx)(m.Toast,{ref:B,baseZIndex:1e4}),Object(N.jsxs)("section",{children:[Object(N.jsxs)(gt.Sidebar,{className:"event-side-bar",visible:_,onHide:function(){return z(!1)},style:{left:"16.5rem",paddingTop:"75px"},children:[Object(N.jsx)("h3",{children:"Filtre d'\xe9v\xe8nements"}),Object(N.jsx)("h5",{children:"S\xe9lection du type"}),Object(N.jsxs)("div",{className:"event-type-selection mb",children:[Object(N.jsx)(vt.RadioButton,{value:"old",inputId:"event-log-datetime-old-value",name:"event-log-datetime",onChange:function(e){return D(e.value)},checked:"old"===L}),Object(N.jsx)("label",{htmlFor:"event-log-datetime-old-value",id:"event-log-datetime-old",children:"Evenements ant\xe9rieurs"})]}),Object(N.jsxs)("div",{className:"event-type-selection",children:[Object(N.jsx)(vt.RadioButton,{value:"now",inputId:"event-log-datetime-now-value",name:"event-log-datetime",onChange:function(e){return D(e.value)},checked:"now"===L}),Object(N.jsx)("label",{htmlFor:"event-log-datetime-now-value",id:"event-log-datetime-now",children:"Evenements actuels"})]}),"old"===L?Object(N.jsxs)("div",{className:"select-file-container",children:[Object(N.jsx)("hr",{}),Object(N.jsx)("h5",{children:"S\xe9lection des fichiers"}),Object(N.jsx)(Ot.Dropdown,{className:"mounth-dropdown",value:f,options:u.map((function(e){return e.month})),onChange:function(e){return h(e.value)},required:!0,placeholder:"S\xe9lectionnez un mois"}),Object(N.jsx)(Ot.Dropdown,{className:"file-dropdown",value:x,options:u.filter((function(e){return e.month===f})).map((function(e){return e.names}))[0],onChange:function(e){return y(e.value)},required:!0,placeholder:"S\xe9lectionnez un fichier"}),Object(N.jsx)(ne.Button,{label:"T\xe9l\xe9charger",icon:"pi pi-download",onClick:function(){return Y()}})]}):null,Object(N.jsx)("hr",{}),Object(N.jsxs)("div",{className:"select-time-container",children:[Object(N.jsx)("h5",{children:"S\xe9lection d'une plage horaire"}),Object(N.jsxs)("div",{className:"select-start-date",children:[Object(N.jsx)("p",{children:"A partir de :"}),Object(N.jsx)(mt.Calendar,{name:"startDate",showTime:!0,readOnlyInput:!0,value:k.startDate&&k.startDate.date,dateFormat:"dd/mm/yy",timeOnly:!0,placeholder:"Horaire de d\xe9but",onChange:function(e){return $(e)}})]}),Object(N.jsxs)("div",{className:"select-end-date",children:[Object(N.jsx)("p",{children:"Jusqu'\xe0 :"}),Object(N.jsx)(mt.Calendar,{name:"endDate",showTime:!0,readOnlyInput:!0,value:k.endDate&&k.endDate.date,dateFormat:"dd/mm/yy",timeOnly:!0,placeholder:"Horaire de fin",onChange:function(e){return $(e)}})]})]}),Object(N.jsx)("hr",{}),Object(N.jsxs)("div",{className:"criticity-container",children:[Object(N.jsx)("h5",{children:"Criticit\xe9"}),Object(N.jsx)(te.MultiSelect,{value:W,options:V,onChange:function(e){return J(e.value)}})]}),"old"!==L?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("hr",{}),Object(N.jsx)(ne.Button,{label:"T\xe9l\xe9charger",icon:"pi pi-download",onClick:function(){return Y()}})]}):"",Object(N.jsx)("hr",{}),Object(N.jsx)(ne.Button,{label:"Rechercher",icon:"pi pi-search",onClick:function(){return Q()}})]}),Object(N.jsx)(ne.Button,{icon:"pi pi-filter",onClick:function(){return z(!0)},style:{marginBottom:"2rem"},label:"Filtrer"}),Object(N.jsx)(kt,{header:function(){return Object(N.jsx)("div",{className:"table-header",children:Object(N.jsx)("h3",{children:"Liste des \xe9v\xe8nements"})})},values:s,setDoRequest:P,refreshData:!0})]})]})}))),Nt=n(64),Tt=n(95),Ct=function(){function e(){Object(d.a)(this,e),this.identifier=-1,this.date=new Date,this.isSynthetized=!1,this.text=null,this.voice=null,this.isRecordedVoice=!1,this.isMustBeBroadcasted=!1,this.broadcastOrder=0,this.audioFilePath=null,this.isBroadcasting=!1}return Object(b.a)(e,null,[{key:"parse",value:function(t){if(console.log(t),t&&void 0!==t.identifier&&void 0!==t.date&&void 0!==t.isSynthetized&&void 0!==t.text&&void 0!==t.voice&&void 0!==t.isRecordedVoice&&void 0!==t.isMustBeBroadcasted&&void 0!==t.broadcastOrder&&void 0!==t.audioFilePath&&void 0!==t.isBroadcasting){var n=new e;return n.identifier=t.identifier,n.date=t.date,n.isSynthetized=t.isSynthetized,n.text=t.text,n.voice=t.voice,n.isRecordedVoice=t.isRecordedVoice,n.isMustBeBroadcasted=t.isMustBeBroadcasted,n.broadcastOrder=t.broadcastOrder,n.audioFilePath=t.audioFilePath,n}return null}}]),e}(),Et=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.call(this,String("/api/v0").concat("/additionals-messages"))}return Object(b.a)(n,[{key:"get",value:function(){var e=this;return new Promise((function(t,a){Object(B.a)(Object(M.a)(n.prototype),"get",e).call(e).then((function(e){var n=[];e.forEach((function(e){n.push(Ct.parse(e))})),t(n)})).catch((function(e){a(e)}))}))}},{key:"find",value:function(e){var t=this;return new Promise((function(a,r){Object(B.a)(Object(M.a)(n.prototype),"find",t).call(t,{},e).then((function(e){a(e)})).catch((function(e){r(e)}))}))}},{key:"create",value:function(e,t){var n=this;return new Promise((function(a,r){var s={Authorization:"Bearer ".concat(t),"Content-Type":"multipart/form-data"};console.log(s),_.a.post("".concat(n.url,"/upload"),e,s).then((function(e){a(e.data)})).catch((function(e){r(e)}))}))}},{key:"update",value:function(e){var t=this;return new Promise((function(a,r){Object(B.a)(Object(M.a)(n.prototype),"update",t).call(t,{},e.identifier,e).then((function(e){console.log(e),a(e)})).catch((function(e){r(e)}))}))}},{key:"download",value:function(e,t){var n=this;return new Promise((function(a,r){var s={Authorization:"Bearer ".concat(e)};_.a.get("".concat(n.url,"/").concat(t,"/download"),{responseType:"blob",headers:s}).then((function(e){console.log(e),a({status:e.status,blob:e.data})})).catch((function(e){r(e)}))}))}}]),n}(z),Pt=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.call(this,String("/api/v0").concat("/text-to-speech/synthetize"))}return Object(b.a)(n,[{key:"createSynthetizedMessage",value:function(e){var t=this;return new Promise((function(a,r){Object(B.a)(Object(M.a)(n.prototype),"create",t).call(t,{},e).then((function(e){a(e)})).catch((function(e){r(e)}))}))}}]),n}(z),Rt=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(e){return Object(d.a)(this,n),t.call(this,String("/api/v0").concat("/text-to-speech/download/").concat(e))}return Object(b.a)(n,[{key:"download",value:function(){var e=Object(v.a)(O.a.mark((function e(t){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={Authorization:"Bearer ".concat(t)},e.next=4,_.a.get(this.url,{responseType:"blob",headers:n});case 4:return a=e.sent,e.abrupt("return",{status:a.status,blob:a.data});case 8:if(e.prev=8,e.t0=e.catch(0),console.error(e.t0),!e.t0.response){e.next=13;break}return e.abrupt("return",{status:e.t0.response.status,message:e.t0.response.statusText});case 13:return e.abrupt("return",{status:500,message:e.t0.message});case 14:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}]),n}(z),It=function e(t){Object(d.a)(this,e),this.identifier=0,this.text=t,this.voice=null},Lt=(n(209),Object(o.b)(null,(function(e){return{setErrorInState:function(t){return e(y(t))}}}))((function(e){var t=e.setErrorInState,n=e.setAdditionalsMessages,r=Object(a.useMemo)((function(){return new Et}),[]),s=Object(a.useMemo)((function(){return new Ct}),[]),i=Object(a.useState)(""),c=Object(l.a)(i,2),o=c[0],u=c[1],d=Object(a.useState)(null),b=Object(l.a)(d,2),j=b[0],f=b[1],h=Object(a.useState)(null),p=Object(l.a)(h,2),g=p[0],x=p[1],y=Object(a.useState)(null),w=Object(l.a)(y,2),S=w[0],k=w[1],A=Object(a.useState)(!1),T=Object(l.a)(A,2),C=T[0],E=T[1],P=Object(se.a)(),R=Object(l.a)(P,1)[0],I=Object(a.useRef)(null),L=document.getElementsByClassName("audio-element-message-synthetize")[0],D=function(){var e=Object(v.a)(O.a.mark((function e(){var n,a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new Pt,a=new It(o),e.next=5,n.createSynthetizedMessage(a);case 5:r=e.sent,k(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(e.t0.response?e.t0.response.status:e.t0.status||500);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(v.a)(O.a.mark((function e(){var n,a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!S){e.next=12;break}return n=new Rt(S),e.next=5,n.download(R.jwt);case 5:a=e.sent,x({blob:a.blob,filename:S}),r=URL.createObjectURL(a.blob),f(r),console.log({audioElement:L}),L.play(),E(!0);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),t(e.t0.response?e.t0.response.status:e.t0.status||500);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),M=function(){k(null),u(null),E(!1),I.current.show({severity:"info",summary:"Message d'information",detail:"Processus annul\xe9"})};return Object(N.jsxs)("div",{className:"synthesis-message-container",children:[Object(N.jsx)(m.Toast,{ref:I,baseZIndex:1e4}),Object(N.jsx)("audio",{className:"audio-element-message-synthetize",src:j&&j,type:"audio/webm;codecs=opus"}),S?null:Object(N.jsx)(Tt.InputTextarea,{className:"synthesis-message-textarea",value:o,onChange:function(e){return u(e.target.value)},autoResize:!0}),S?Object(N.jsxs)("div",{className:"buttons-container",children:[Object(N.jsx)(ne.Button,{className:"p-button-secondary",icon:"pi pi-play",label:"Ecouter",onClick:function(){return B()}}),Object(N.jsx)(ne.Button,{className:"p-button-success",icon:"pi pi-check",label:"Valider",disabled:!C,onClick:function(){return function(){var e=new FormData;s.text=o,s.isSynthetized=!0,console.log(g),e.append("file",g.blob,g.filename),e.append("additional-message",s),r.create(e).then((function(e){console.log(e),u(null),k(null),E(!1),n((function(t){return[].concat(Object($.a)(t),[e])})),I.current.show({severity:"success",summary:"Message de succ\xe8s",detail:"Message enregistr\xe9"})})).catch((function(e){t(e.response?e.response.status:e.status||500)}))}()}}),Object(N.jsx)(ne.Button,{className:"p-button-danger",icon:"pi pi-times",label:"Annuler",onClick:function(){return M()}})]}):Object(N.jsx)("div",{className:"button-container",children:Object(N.jsx)(ne.Button,{className:"p-button-primary",icon:"pi pi-check",label:"Synth\xe9tiser ce message",onClick:function(){return D()}})})]})}))),Dt=n(96),Bt=(n(210),function(e){var t=e.setAudioURL,n=e.setBlob,r=Object(a.useState)(!1),s=Object(l.a)(r,2),i=s[0],c=s[1];return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("div",{className:"record-message-container",children:[Object(N.jsx)(Dt.ReactMic,{record:i,className:"sound-wave",onStop:function(e){n(e.blob),t(e.blobURL)}}),Object(N.jsx)("div",{className:"recording-buttons-container",children:i?Object(N.jsx)(ne.Button,{icon:"pi pi-pause",onClick:function(){return c(!1)},label:"Stoper l'enregistrement"}):Object(N.jsx)(ne.Button,{icon:"pi pi-circle-off",onClick:function(){return c(!0)},label:"Lancer l'enregistrement"})})]})})}),Mt=Object(o.b)(null,(function(e){return{setErrorInState:function(t){return e(y(t))}}}))((function(e){var t=e.audioElement,n=e.setAudioURL,r=e.blob,s=e.setBlob,i=e.setErrorInState,c=e.setAdditionalsMessages,o=Object(se.a)(),u=Object(l.a)(o,1)[0],d=Object(a.useRef)(null),b=Object(a.useMemo)((function(){return new Et}),[]),j=Object(a.useState)(!1),f=Object(l.a)(j,2),h=f[0],p=f[1];return Object(N.jsxs)("div",{className:"player-container",children:[Object(N.jsx)(m.Toast,{ref:d,baseZIndex:1e4}),Object(N.jsx)(ne.Button,{className:"p-button-secondary",label:"Ecouter",icon:"pi pi-play",onClick:function(){t&&(p(!0),t.play())}}),Object(N.jsx)(ne.Button,{className:"p-button-success",label:"Valider",icon:"pi pi-check",disabled:!h,onClick:function(){return function(){var e=new FormData,t="".concat(Object(st.a)(),".wav");e.append("file",r,t),b.create(e,u.jwt).then((function(e){var t=e;t.isRecordedVoice=!0,b.update(t).then((function(e){console.log(e),s(null),n(null),c((function(e){return[].concat(Object($.a)(e),[t])})),d.current.show({severity:"success",summary:"Message de succ\xe8s",detail:"Message enregistr\xe9"})})).catch((function(e){i(e.response?e.response.status:e.status||500)}))})).catch((function(e){i(e.response?e.response.status:e.status||500)}))}()}}),Object(N.jsx)(ne.Button,{className:"p-button-danger",label:"Annuler",icon:"pi pi-times",onClick:function(){return s(null),n(null),void d.current.show({severity:"info",summary:"Message d'information",detail:"Processus annul\xe9"})}})]})})),Ft=(n(211),function(e){var t=e.setAdditionalsMessages,n=Object(a.useState)(null),r=Object(l.a)(n,2),s=r[0],i=r[1],c=Object(a.useState)(null),o=Object(l.a)(c,2),u=o[0],d=o[1],b=Object(a.useState)(null),j=Object(l.a)(b,2),f=j[0],h=j[1],p=document.getElementsByClassName("audio-element")[0];return Object(N.jsxs)("div",{className:"creation-message-container",children:[Object(N.jsx)("audio",{className:"audio-element",src:s&&s,type:"audio/webm;codecs=opus"}),Object(N.jsxs)(Nt.TabView,{className:"tabview-custom",children:[Object(N.jsx)(Nt.TabPanel,{header:"Texte \xe0 synth\xe9tis\xe9",children:Object(N.jsx)(Lt,{setBlobURL:d,blobURL:u,setAdditionalsMessages:t})}),Object(N.jsx)(Nt.TabPanel,{header:"Enregistrement audio",children:s?Object(N.jsx)(Mt,{setBlob:h,blob:f,audioElement:p,setAudioURL:i,setAdditionalsMessages:t}):Object(N.jsx)(Bt,{setBlob:h,setAudioURL:i})})]})]})}),Ut=n(97),_t=n(98),zt=(n(215),Object(o.b)(null,(function(e){return{setErrorInState:function(t){return e(y(t))}}}))((function(e){var t=e.audio,n=e.setAudioURL,r=e.additionalsMessages,s=e.setAdditionalsMessages,i=e.setErrorInState,c=Object(a.useMemo)((function(){return new Et}),[]),o=Object(se.a)(),u=Object(l.a)(o,1)[0],d=function(e,t,n){var a=Object($.a)(r),o=a.findIndex((function(e){return e.identifier===n.identifier}));switch(t){case"update-broadcast-order":a[o].broadcastOrder=e.value;break;case"update-broadcast-status":a[o].isMustBeBroadcasted=!a[o].isMustBeBroadcasted,console.log(a[o].isMustBeBroadcasted);break;default:return void console.log("updateValuesManager() => Case is not implemented")}c.update(a[o]).then((function(e){console.log(e),s(a)})).catch((function(e){i(e.response?e.response.status:e.status||500)}))},b=function(e,a){var o=a.identifier,l=a.isBroadcasting,d=Object($.a)(r),b=d.findIndex((function(e){return e.identifier===o}));t.additionalMessageIdentifier===o?l?(d[b].isBroadcasting=!1,t.pause()):(d[b].isBroadcasting=!0,t.play()):(d.forEach((function(e){e.isBroadcasting&&(e.isBroadcasting=!1)})),c.download(u.jwt,o).then((function(e){console.log(e),t.additionalMessageIdentifier=o,d[b].isBroadcasting=!0;var a=URL.createObjectURL(e.blob);n(a),t.play()})).catch((function(e){i(e.response?e.response.status:e.status||500)}))),s(d)},j=function(e,t){switch(t){case"date":return Object(N.jsx)("span",{children:new V(new Date(e.date)).format("dd-MM-yyyy hh:mm:ss UTC")});case"audio-type":return e.isRecordedVoice?"Message vocal":"Message synth\xe9tis\xe9";case"broadcast-order":return Object(N.jsx)(Ut.InputNumber,{inputId:"integeronly",value:e.broadcastOrder,onValueChange:function(t){return d(t,"update-broadcast-order",e)},min:1,max:r&&r.length,showButtons:!0,buttonLayout:"vertical"});case"player":return e.isBroadcasting?Object(N.jsx)("i",{onClick:function(t){return b(0,e)},className:"pi pi-pause"}):Object(N.jsx)("i",{onClick:function(t){return b(0,e)},className:"pi pi-play"});case"broadcast-status":return Object(N.jsx)(_t.InputSwitch,{checked:e.isMustBeBroadcasted,onChange:function(t){return d(t,"update-broadcast-status",e)}});default:return console.log("TableAdditionalMessageBodyManager() => Case is not implemented"),null}};return Object(N.jsx)("div",{className:"table-additional-message-container",children:Object(N.jsxs)(ve.DataTable,{value:r,emptyMessage:"No additionnal message found",paginator:!0,rows:10,rowsPerPageOptions:[10,30,60],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",children:[Object(N.jsx)(Oe.Column,{style:{textAlign:"center"},body:function(e){return j(e,"player")},header:"Lecture"}),Object(N.jsx)(Oe.Column,{style:{textAlign:"center"},body:function(e){return j(e,"date")},header:"Date de cr\xe9ation"}),Object(N.jsx)(Oe.Column,{style:{textAlign:"center"},body:function(e){return j(e,"audio-type")},header:"Type d'audio"}),Object(N.jsx)(Oe.Column,{style:{textAlign:"center"},body:function(e){return j(e,"broadcast-order")},header:"Order de diffusion"}),Object(N.jsx)(Oe.Column,{style:{textAlign:"center"},body:function(e){return j(e,"broadcast-status")},header:"Activer / d\xe9sactiver diffusion"})]})})}))),Ht=(n(216),Object(o.b)(null,(function(e){return{setErrorInState:function(t){return e(y(t))}}}))((function(e){var t=e.setErrorInState,n=Object(a.useState)(null),r=Object(l.a)(n,2),s=r[0],i=r[1],c=document.getElementsByClassName("audio-element")[0],o=Object(a.useState)(null),u=Object(l.a)(o,2),d=u[0],b=u[1],j=Object(a.useMemo)((function(){return new Et}),[]),f=Object(a.useCallback)((function(){j.get().then((function(e){console.log(e),i(e)})).catch((function(e){t(e.response?e.response.status:e.status||500)}))}),[j,t]);return Object(a.useEffect)((function(){f()}),[f]),console.log(s),Object(N.jsx)("main",{children:Object(N.jsxs)("section",{className:"broadcast-message-container",children:[Object(N.jsx)("audio",{className:"audio-element",src:d,type:"audio/webm;codecs=opus"}),Object(N.jsx)(we.Fieldset,{legend:"Cr\xe9ation de message",toggleable:!0,children:Object(N.jsx)(Ft,{setAdditionalsMessages:i})}),Object(N.jsx)(we.Fieldset,{legend:"Messages compl\xe9mentaires",toggleable:!0,children:Object(N.jsx)(zt,{setAdditionalsMessages:i,additionalsMessages:s,audio:c,audioURL:d,setAudioURL:b})})]})})}))),Vt=(n(217),n(218),n(219),n(220),n(221),function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.call(this,String("/api/v0").concat("/statistics"))}return Object(b.a)(n,[{key:"get",value:function(e){var t=this;return new Promise((function(a,r){return[Object(B.a)(Object(M.a)(n.prototype),"get",t).call(t,e).then((function(e){a(e)})).catch((function(e){r(e)}))]}))}}]),n}(z)),Gt=(n(222),Object(o.b)(null,(function(e){return{setErrorInState:function(t){return e(y(t))}}}))((function(e){var t=Object(a.useState)([]),n=Object(l.a)(t,2),r=n[0],s=n[1],i=Object(a.useRef)(null),c=Object(a.useState)(null),o=Object(l.a)(c,2),u=o[0],d=o[1],b=Object(a.useState)(null),j=Object(l.a)(b,2),f=j[0],h=j[1],p=Object(a.useState)(!1),O=Object(l.a)(p,2),v=O[0],g=O[1],x=Object(a.useState)([]),y=Object(l.a)(x,2),w=y[0],S=y[1];Object(a.useEffect)((function(){e.values&&s(e.values)}),[e]);var k=function(e){return e&&e.language?Object(N.jsx)(jt.a,{code:ft(e.language),height:20}):Object(N.jsx)("span",{children:"Langue en cours de r\xe9cup\xe9ration"})},A=function(e){return e?Object(N.jsx)(N.Fragment,{children:new V(new Date(e.date)).format("dd-MM-yyyy hh:mm:ss UTC")}):null},T=function(e){var t="badge-".concat(Object(st.a)().toString().replace("-",""));return e?"ERROR"===e.status||e.error?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(dt.Tooltip,{target:".".concat(t),content:e.error,position:"bottom"}),Object(N.jsx)(W.Badge,{id:t,value:e.status,severity:"danger"})]}):"PROCESSING"===e.status?Object(N.jsx)(W.Badge,{value:e.status,severity:"warning"}):e.isAudioFileExists?Object(N.jsx)(W.Badge,{value:"Disponible",severity:"success"}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(dt.Tooltip,{target:".".concat(t),content:"Audio file not exists.",position:"bottom"}),Object(N.jsx)(W.Badge,{id:t,value:"ERROR",severity:"danger",className:"status-".concat(e.status," ").concat(t)})]}):null},C=function(t){if(t){return Object(N.jsxs)("div",{className:"orders-subtable",children:[Object(N.jsx)("h5",{children:"Liste des diffusions"}),Object(N.jsxs)(ve.DataTable,{value:t.broadcasts,dataKey:"identifier",globalFilter:e.globalFilter,rowClassName:R,emptyMessage:"Il n'y a pas de diffusion.",children:[Object(N.jsx)(Oe.Column,{style:{textAlign:"center"},field:"identifier",header:"ID"}),Object(N.jsx)(Oe.Column,{style:{textAlign:"center"},body:A,header:"Date"}),Object(N.jsx)(Oe.Column,{style:{textAlign:"center"},field:"broadcastType",header:"Type"})]})]})}return null},E=function(e){var t=e.data;if(t){for(var n=-1,a=-1,i=0;i<r.length;i+=1)if((a=r[i].translations.findIndex((function(e){return e.identifier===t.identifier})))>-1)return void(n=r[i].identifier);var c=Object($.a)(r);c[n].translations[a].isRowOpen=!1,s(c)}},P=function(e){var t=e.data;if(t){for(var n=-1,a=-1,i=0;i<r.length;i+=1)if((a=r[i].translations.findIndex((function(e){return e.identifier===t.identifier})))>-1)return void(n=r[i].identifier);var c=Object($.a)(r);c[n].translations[a].isRowOpen=!0,s(c)}},R=function(){return{rowOpen:!0}};return Object(N.jsxs)("div",{className:"datatable-rowexpansion-demo",children:[Object(N.jsx)(m.Toast,{ref:i}),Object(N.jsx)(he.Dialog,{header:"T\xe9l\xe9mesures du bulletin",visible:v,style:{width:"50vw"},dismissableMask:!0,onHide:function(){return g(!1)},children:w?Object(N.jsx)("div",{className:"settings-wrapper",children:Object(N.jsx)("div",{className:"container",children:Object(N.jsxs)(ve.DataTable,{value:w,dataKey:"identifier",paginator:!0,rows:5,rowsPerPageOptions:[5,10,20],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",emptyMessage:"Il n'y a pas de t\xe9l\xe9mesures.",children:[Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center"},style:{textAlign:"center"},field:"name",header:"T\xe9l\xe9mesure"}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center"},style:{textAlign:"center"},field:"value",header:"Valeur"})]})})}):null}),Object(N.jsx)("div",{className:"card",children:Object(N.jsxs)(ve.DataTable,{value:r,expandedRows:u,onRowToggle:function(e){return d(e.data)},onRowCollapse:function(e){return function(e){var t=e.data;if(t){var n=r.findIndex((function(e){return e.name===t.name})),a=Object($.a)(r);a[n].isRowOpen=!1,s(a)}return null}(e)},onRowExpand:function(e){return function(e){var t=e.data;if(t){var n=r.findIndex((function(e){return e.name===t.name})),a=Object($.a)(r);a[n].isRowOpen=!0,s(a)}}(e)},rowExpansionTemplate:function(e){if(e){var t="Synth\xe8ses vocales du bulletin dat\xe9 du ".concat(new V(new Date(e.date)).format("dd-MM-yyyy hh:mm:ss UTC"));return Object(N.jsxs)("div",{className:"orders-subtable",children:[Object(N.jsx)("h5",{children:t}),Object(N.jsxs)(ve.DataTable,{value:e.translations,dataKey:"identifier",expandedRows:f,onRowToggle:function(e){return h(e.data)},onRowCollapse:function(e){return E(e)},onRowExpand:function(e){return P(e)},rowExpansionTemplate:C,rowClassName:R,emptyMessage:"Il n'y a pas de traducton.",children:[Object(N.jsx)(Oe.Column,{headerStyle:{background:"#3A72A3"},expander:!0,style:{width:"2em"}}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#3A72A3"},style:{textAlign:"center"},body:k,header:"Langue"}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#3A72A3"},style:{textAlign:"center"},field:"voice",header:"Voix"}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#3A72A3"},style:{textAlign:"center"},body:T,header:"Statut"})]})]})}return null},dataKey:"name",header:e.header(),rowClassName:R,paginator:!0,rows:10,rowsPerPageOptions:[10,30,60],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",emptyMessage:"Il n'y a pas de bulletin m\xe9t\xe9o.",children:[Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1"},expander:!0,style:{width:"2em"}}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center"},style:{textAlign:"center"},body:A,header:"Date"}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center"},style:{textAlign:"center"},body:function(e){if(e){if("ERROR"===e.status||e.error){var t="badge-".concat(Object(st.a)().toString().replace("-",""));return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(dt.Tooltip,{target:".".concat(t),content:e.error,position:"bottom"}),Object(N.jsx)(W.Badge,{id:t,value:e.status,severity:"danger",className:"customer-badge status-".concat(e.status," ").concat(t)})]})}return Object(N.jsx)(W.Badge,{value:e.status})}return null},header:"Statut"}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center"},style:{textAlign:"center"},body:function(e){return e?Object(N.jsx)(L.Tag,{style:{fontSize:"1rem",background:"#3f51b5"},value:e.report_type}):null},header:"Protocole"}),Object(N.jsx)(Oe.Column,{headerStyle:{background:"#0d47a1",color:"#e8eaf6",textAlign:"center"},style:{textAlign:"center"},body:function(e){return Object(N.jsx)(ne.Button,{label:e.weatherTelemetries.length,className:"p-button-rounded",onClick:function(t){return n=e.weatherTelemetries,g(!0),void S(n);var n}})},header:"T\xe9l\xe9mesures"})]})})]})}))),qt=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(0),i=Object(l.a)(s,2),c=i[0],o=i[1],u=Object(a.useState)(0),d=Object(l.a)(u,2),b=d[0],j=d[1],f=Object(a.useRef)(null),h=Object(a.useState)(""),p=Object(l.a)(h,2),O=p[0],v=p[1],g=Object(a.useState)(""),x=Object(l.a)(g,2),y=x[0],w=x[1],S=Object(a.useState)(0),k=Object(l.a)(S,2),A=k[0],T=k[1],C=Object(a.useCallback)((function(){var e=0;if(n)for(var t=0;t<n.length;t+=1){var a=n[t];if(a)for(var r=0;r<a.translations.length;r+=1){var s=a.translations[r];if(s){for(var i=0,c=0;c<s.broadcasts.length;c+=1){var u=s.broadcasts[c];u&&"RTC"===u.broadcastType&&(i+=1)}e+=i}}}o(e)}),[n,o]),E=Object(a.useCallback)((function(){var e=0;if(n)for(var t=0;t<n.length;t+=1){var a=n[t];if(a)for(var r=0;r<a.translations.length;r+=1){var s=a.translations[r];if(s){for(var i=0,c=0;c<s.broadcasts.length;c+=1){var o=s.broadcasts[c];o&&"VHF"===o.broadcastType&&(i+=1)}e+=i}}}j(e)}),[n,j]);Object(a.useEffect)((function(){var e=0,t=0;if(n)for(var a=0;a<n.length;a+=1){var r=n[a];if(r)for(var s=0;s<r.translations.length;s+=1){var i=r.translations[s];if(i){for(var c=0,u=0,l=0;l<i.broadcasts.length;l+=1){var d=i.broadcasts[l];d&&("RTC"===d.broadcastType?c+=1:"VHF"===d.broadcastType&&(u+=1))}t+=u,e+=c}}}o(e),j(t)}),[n,o,j]),Object(a.useEffect)((function(){var e=new lt;O&&y?Date.parse(O)>Date.parse(y)?f.current.show({severity:"warn",summary:"Message d'avertissement",detail:"La date de d\xe9but doit \xeatre inf\xe9rieure \xe0 la date de fin",life:4e3}):e.get({broadcasted_from:Date.parse(O),broadcasted_to:Date.parse(y),isTelemetry:!0}).then((function(e){r(e)})).catch((function(e){return console.error(e)})):O?e.get({broadcasted_from:Date.parse(O),broadcasted_to:(new Date).getTime(),isTelemetry:!0}).then((function(e){r(e)})).catch((function(e){return console.error(e)})):e.get({isTelemetry:!0,broadcasted_to:(new Date).getTime()}).then((function(e){r(e)})).catch((function(e){return console.error(e)}))}),[r,O,y]);var P=Object(a.useCallback)((function(){(new Vt).get({}).then((function(e){T(e.metrics.APPLICAITON_UPTIME)})).catch((function(){T(0)}))}),[T]);Object(a.useEffect)((function(){P(),C(),E()}),[P,C,E]);return Object(N.jsxs)("main",{className:"page page-bulletins page-container",children:[Object(N.jsx)(m.Toast,{ref:f,baseZIndex:1e4}),Object(N.jsxs)("section",{children:[Object(N.jsx)(ee.Card,{className:"StatisticPanel",title:function(){try{var e=Math.floor(A/1e3%60),t=Math.floor(A/6e4%60),n=Math.floor(A/36e5%24),a=Math.floor(A/864e5%24);return n=n<10?String("0").concat(n):n,t=t<10?String("0").concat(t):t,e=e<10?String("0").concat(e):e,"DDj HHh MMm SSs".replace("DD",a).replace("HH",n).replace("MM",t).replace("SS",e)}catch(r){return Object(N.jsx)(D.Skeleton,{})}},subTitle:"Temps d'\xe9x\xe9cution du syst\xe8me ride4ever."}),Object(N.jsx)("div",{className:"date-picker-container",children:Object(N.jsxs)("div",{className:"calendar-container",children:[Object(N.jsxs)("div",{className:"start-date-container",children:[Object(N.jsx)("h5",{children:"Date de d\xe9but"}),Object(N.jsx)(mt.Calendar,{showTime:!0,value:O,dateFormat:"dd/mm/yy",placeholder:"Selectionnez une date",onChange:function(e){return v(e.value)}})]}),Object(N.jsxs)("div",{className:"end-date-container",children:[Object(N.jsx)("h5",{children:"Date de fin"}),Object(N.jsx)(mt.Calendar,{showTime:!0,value:y,dateFormat:"dd/mm/yy",placeholder:"Selectionnez une date",onChange:function(e){return w(e.value)}})]})]})}),Object(N.jsxs)("div",{className:"StatisticsContainer",children:[Object(N.jsx)(ee.Card,{className:"StatisticPanel",title:c,subTitle:"Nombre d'appels sur le serveur vocal."}),Object(N.jsx)(ee.Card,{className:"StatisticPanel",title:b,subTitle:"Nombre d'appels VHF."})]}),Object(N.jsx)("div",{className:"bulletin-table-container",children:Object(N.jsx)(Gt,{header:function(){return Object(N.jsx)("div",{className:"table-header",children:Object(N.jsx)("h3",{children:"Liste des bulletins historis\xe9s"})})},values:n,refreshData:!1})})]})]})};var Wt=Object(h.g)((function(e){e.location,e.history;var t=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"onOpen",value:function(e){console.info(this,"Websocket client is now connected.",e)}},{key:"onError",value:function(e){console.error(e)}},{key:"onMessage",value:function(){}},{key:"onClose",value:function(e){console.info(this,"Websocket client is now disconnected.",e)}}]),n}(C),n=Object(a.useState)(null),r=Object(l.a)(n,2),s=(r[0],r[1],Object(a.useState)(null)),i=Object(l.a)(s,2),c=(i[0],i[1],Object(o.c)((function(e){return e.user.roles}))),u=Object(o.c)((function(e){return e.alerts})),p=(Object(a.useState)(JSON.parse(JSON.parse(localStorage.getItem("persist:root")).user).roles),Object(a.useState)([new q("Bulletins M\xe9t\xe9o","/bulletins",pt,!0,!0,"/assets/images/icons/menu/home.svg",["users","supervisors"]),new q("Configuration de diffusion","/broadcast-configuration",re,!0,!0,"/assets/images/icons/menu/broadcast.svg",["admins"]),new q("Messages compl\xe9mentaires","/broadcast-message",Ht,!0,!0,"/assets/images/icons/menu/audio.svg",["users"]),new q("Supervision","/monitoring",tt,!0,!0,"/assets/images/icons/menu/supervision.svg",["users","supervisors"]),new q("Statistiques","/statistics",qt,!0,!0,"/assets/images/icons/menu/history.svg",["users","supervisors"]),new q("Anomalies","/anomalies",rt,!0,!0,"/assets/images/icons/menu/warning.svg",["users","supervisors"],u.length),new q("Gestion de compte","/manage-account",ye,!0,!0,"/assets/images/icons/menu/management.svg",["admins"]),new q("Journal d'\xe9v\xe8nements","/events-logs",At,!0,!0,"/assets/images/icons/menu/event-log.svg",["admins","users","supervisors"]),new q("D\xe9connexion","/login",je,!0,!0,"/assets/images/icons/menu/logout.svg")])),O=Object(l.a)(p,2),v=O[0];return O[1],Object(a.useEffect)((function(){var e=R.getInstance();e.setEventListener(new t),e.connect()})),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(T,{}),Object(N.jsx)(G,{}),Object(N.jsxs)("div",{className:"dom-container",children:[Object(N.jsx)("div",{className:"side-bar-container",children:Object(N.jsx)(Q,{routes:v,className:"application-menu"})}),Object(N.jsx)("div",{className:"components-container",children:Object(N.jsxs)(h.d,{children:[v.map((function(e){return e.allowedGroups?e.allowedGroups.map((function(t){return null!==c&&c.includes(t)?Object(N.jsx)(ie,{exact:e.exact,path:e.path,component:e.component,allowedGroups:e.allowedGroups}):null})):Object(N.jsx)(h.b,{exact:e.exact,path:e.path,component:e.component})})),Object(N.jsx)(h.b,{exact:!0,path:"/",render:function(){return Object(N.jsx)(h.a,{to:"/bulletins"})}})]})})]})]})})),Jt=function(){var e=Object(a.useRef)(null),t=Object(o.c)((function(e){return e.toast.isShow})),n=Object(o.c)((function(e){return e.toast.severity})),r=Object(o.c)((function(e){return e.toast.summary})),s=Object(o.c)((function(e){return e.toast.detail}));return Object(a.useEffect)((function(){t&&e.current.show({severity:n,summary:r,detail:s})}),[t,n,r,s]),Object(N.jsx)(m.Toast,{ref:e,baseZIndex:1e4})},Zt=n(34),Kt=n(99),Xt=n(76),Yt=n(100),Qt=n.n(Yt),$t=n(101),en={firstname:null,lastname:null,username:null,roles:null,jwt:null};var tn={isShow:!1,severity:null,summary:null,detail:null};var nn=[];var an={requestStatus:null};var rn=Object(Zt.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:en,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(F.a)(Object(F.a)({},e),{},{firstname:t.data.firstname,lastname:t.data.lastname,username:t.data.username,roles:t.data.roles,jwt:t.data.jwt});case S:return{firstname:en.firstname,lastname:en.lastname,username:en.username,roles:en.roles};default:return e}},toast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le:return Object(F.a)(Object(F.a)({},e),{},{isShow:!0,severity:t.data.severity,summary:t.data.summary,detail:t.data.detail});case de:return Object(F.a)(Object(F.a)({},e),{},{isShow:!1,severity:null,summary:null,detail:null});default:return e}},alerts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Me:return e.unshift(t.data),Object($.a)(e);case Fe:return e=nn,Object($.a)(e);default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(F.a)(Object(F.a)({},e),{},{requestStatus:t.data});case x:return Object(F.a)(Object(F.a)({},e),an);default:return e}}}),sn={key:"root",storage:Qt.a},cn=Object(Xt.a)(sn,rn),on=Object(Kt.composeWithDevTools)(Object(Zt.applyMiddleware)($t.a)),un=Object(Zt.createStore)(cn,on);Object(Xt.b)(un);var ln=un;i.a.render(Object(N.jsx)(r.a.StrictMode,{children:Object(N.jsx)(c.a,{children:Object(N.jsxs)(o.a,{store:ln,children:[Object(N.jsx)(u.a,{children:Object(N.jsx)(Wt,{})}),Object(N.jsx)(Jt,{})]})})}),document.getElementById("root"))}},[[225,1,2]]]);
//# sourceMappingURL=main.2e66a855.chunk.js.map